"""Initial database schema with complete GarageReg model

Revision ID: abfec71666fd
Revises: 
Create Date: 2025-10-01 19:46:26.838025

"""
from typing import Sequence, Union

from alembic import op
import sqlalchemy as sa

# revision identifiers, used by Alembic.
revision: str = 'abfec71666fd'
down_revision: Union[str, Sequence[str], None] = None
branch_labels: Union[str, Sequence[str], None] = None
depends_on: Union[str, Sequence[str], None] = None


def upgrade() -> None:
    """Upgrade schema."""
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_table('checklist_templates',
    sa.Column('name', sa.String(length=200), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('category', sa.String(length=100), nullable=True),
    sa.Column('version', sa.String(length=20), nullable=False),
    sa.Column('template_type', sa.String(length=50), nullable=False),
    sa.Column('applicable_gate_types', sa.JSON(), nullable=True),
    sa.Column('applicable_manufacturers', sa.JSON(), nullable=True),
    sa.Column('estimated_duration_minutes', sa.Integer(), nullable=True),
    sa.Column('recommended_frequency_days', sa.Integer(), nullable=True),
    sa.Column('required_tools', sa.JSON(), nullable=True),
    sa.Column('required_skills', sa.JSON(), nullable=True),
    sa.Column('weather_conditions', sa.String(length=200), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_mandatory', sa.Boolean(), nullable=False),
    sa.Column('settings', sa.JSON(), nullable=True),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_checklist_template_active', 'checklist_templates', ['is_active'], unique=False)
    op.create_index('idx_checklist_template_category', 'checklist_templates', ['category'], unique=False)
    op.create_index('idx_checklist_template_mandatory', 'checklist_templates', ['is_mandatory'], unique=False)
    op.create_index('idx_checklist_template_name', 'checklist_templates', ['name'], unique=False)
    op.create_index('idx_checklist_template_type', 'checklist_templates', ['template_type'], unique=False)
    op.create_index(op.f('ix_checklist_templates_category'), 'checklist_templates', ['category'], unique=False)
    op.create_index(op.f('ix_checklist_templates_id'), 'checklist_templates', ['id'], unique=False)
    op.create_index(op.f('ix_checklist_templates_name'), 'checklist_templates', ['name'], unique=False)
    op.create_index(op.f('ix_checklist_templates_org_id'), 'checklist_templates', ['org_id'], unique=False)
    op.create_table('integrations',
    sa.Column('name', sa.String(length=200), nullable=False),
    sa.Column('integration_type', sa.String(length=100), nullable=False),
    sa.Column('provider', sa.String(length=100), nullable=False),
    sa.Column('endpoint_url', sa.String(length=1000), nullable=True),
    sa.Column('authentication_type', sa.String(length=50), nullable=True),
    sa.Column('credentials', sa.JSON(), nullable=True),
    sa.Column('settings', sa.JSON(), nullable=True),
    sa.Column('field_mappings', sa.JSON(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('last_sync_at', sa.DateTime(), nullable=True),
    sa.Column('last_success_at', sa.DateTime(), nullable=True),
    sa.Column('last_error_at', sa.DateTime(), nullable=True),
    sa.Column('last_error_message', sa.Text(), nullable=True),
    sa.Column('health_status', sa.String(length=50), nullable=False),
    sa.Column('total_requests', sa.Integer(), nullable=False),
    sa.Column('successful_requests', sa.Integer(), nullable=False),
    sa.Column('failed_requests', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_integration_active', 'integrations', ['is_active'], unique=False)
    op.create_index('idx_integration_health', 'integrations', ['health_status'], unique=False)
    op.create_index('idx_integration_name', 'integrations', ['name'], unique=False)
    op.create_index('idx_integration_provider', 'integrations', ['provider'], unique=False)
    op.create_index('idx_integration_type', 'integrations', ['integration_type'], unique=False)
    op.create_index(op.f('ix_integrations_id'), 'integrations', ['id'], unique=False)
    op.create_index(op.f('ix_integrations_integration_type'), 'integrations', ['integration_type'], unique=False)
    op.create_index(op.f('ix_integrations_name'), 'integrations', ['name'], unique=False)
    op.create_index(op.f('ix_integrations_org_id'), 'integrations', ['org_id'], unique=False)
    op.create_index(op.f('ix_integrations_provider'), 'integrations', ['provider'], unique=False)
    op.create_table('maintenance_plans',
    sa.Column('name', sa.String(length=200), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('plan_type', sa.String(length=50), nullable=False),
    sa.Column('applies_to_gate_types', sa.JSON(), nullable=True),
    sa.Column('applies_to_manufacturers', sa.JSON(), nullable=True),
    sa.Column('applies_to_components', sa.JSON(), nullable=True),
    sa.Column('frequency_type', sa.String(length=20), nullable=False),
    sa.Column('frequency_value', sa.Integer(), nullable=False),
    sa.Column('season_dependent', sa.Boolean(), nullable=False),
    sa.Column('preferred_months', sa.JSON(), nullable=True),
    sa.Column('estimated_duration_hours', sa.Numeric(precision=5, scale=2), nullable=True),
    sa.Column('required_technicians', sa.Integer(), nullable=False),
    sa.Column('required_skills', sa.JSON(), nullable=True),
    sa.Column('required_tools', sa.JSON(), nullable=True),
    sa.Column('required_parts', sa.JSON(), nullable=True),
    sa.Column('estimated_labor_cost', sa.Numeric(precision=10, scale=2), nullable=True),
    sa.Column('estimated_parts_cost', sa.Numeric(precision=10, scale=2), nullable=True),
    sa.Column('estimated_total_cost', sa.Numeric(precision=10, scale=2), nullable=True),
    sa.Column('weather_requirements', sa.String(length=200), nullable=True),
    sa.Column('temperature_min', sa.Integer(), nullable=True),
    sa.Column('temperature_max', sa.Integer(), nullable=True),
    sa.Column('advance_notice_days', sa.Integer(), nullable=False),
    sa.Column('priority', sa.String(length=20), nullable=False),
    sa.Column('safety_category', sa.String(length=20), nullable=False),
    sa.Column('regulatory_required', sa.Boolean(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('settings', sa.JSON(), nullable=True),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_maintenance_plan_active', 'maintenance_plans', ['is_active'], unique=False)
    op.create_index('idx_maintenance_plan_frequency', 'maintenance_plans', ['frequency_type', 'frequency_value'], unique=False)
    op.create_index('idx_maintenance_plan_name', 'maintenance_plans', ['name'], unique=False)
    op.create_index('idx_maintenance_plan_priority', 'maintenance_plans', ['priority'], unique=False)
    op.create_index('idx_maintenance_plan_regulatory', 'maintenance_plans', ['regulatory_required'], unique=False)
    op.create_index('idx_maintenance_plan_type', 'maintenance_plans', ['plan_type'], unique=False)
    op.create_index(op.f('ix_maintenance_plans_id'), 'maintenance_plans', ['id'], unique=False)
    op.create_index(op.f('ix_maintenance_plans_name'), 'maintenance_plans', ['name'], unique=False)
    op.create_index(op.f('ix_maintenance_plans_org_id'), 'maintenance_plans', ['org_id'], unique=False)
    op.create_index(op.f('ix_maintenance_plans_plan_type'), 'maintenance_plans', ['plan_type'], unique=False)
    op.create_table('organizations',
    sa.Column('name', sa.String(length=200), nullable=False),
    sa.Column('display_name', sa.String(length=200), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('email', sa.String(length=320), nullable=True),
    sa.Column('phone', sa.String(length=50), nullable=True),
    sa.Column('website', sa.String(length=500), nullable=True),
    sa.Column('address_line_1', sa.String(length=200), nullable=True),
    sa.Column('address_line_2', sa.String(length=200), nullable=True),
    sa.Column('city', sa.String(length=100), nullable=True),
    sa.Column('state', sa.String(length=100), nullable=True),
    sa.Column('postal_code', sa.String(length=20), nullable=True),
    sa.Column('country', sa.String(length=100), nullable=True),
    sa.Column('tax_number', sa.String(length=50), nullable=True),
    sa.Column('registration_number', sa.String(length=100), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('settings', sa.JSON(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_org_active', 'organizations', ['is_active'], unique=False)
    op.create_index('idx_org_name', 'organizations', ['name'], unique=False)
    op.create_index('idx_org_tax_number', 'organizations', ['tax_number'], unique=False)
    op.create_index(op.f('ix_organizations_id'), 'organizations', ['id'], unique=False)
    op.create_index(op.f('ix_organizations_name'), 'organizations', ['name'], unique=False)
    op.create_table('parts',
    sa.Column('part_number', sa.String(length=100), nullable=False),
    sa.Column('name', sa.String(length=200), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('category', sa.String(length=100), nullable=False),
    sa.Column('manufacturer', sa.String(length=100), nullable=True),
    sa.Column('manufacturer_part_number', sa.String(length=100), nullable=True),
    sa.Column('supplier', sa.String(length=100), nullable=True),
    sa.Column('supplier_part_number', sa.String(length=100), nullable=True),
    sa.Column('compatible_gate_types', sa.JSON(), nullable=True),
    sa.Column('compatible_manufacturers', sa.JSON(), nullable=True),
    sa.Column('compatible_models', sa.JSON(), nullable=True),
    sa.Column('replaces_parts', sa.JSON(), nullable=True),
    sa.Column('weight_kg', sa.Numeric(precision=8, scale=3), nullable=True),
    sa.Column('dimensions_cm', sa.String(length=50), nullable=True),
    sa.Column('material', sa.String(length=100), nullable=True),
    sa.Column('color', sa.String(length=50), nullable=True),
    sa.Column('unit_of_measure', sa.String(length=20), nullable=False),
    sa.Column('minimum_stock_level', sa.Integer(), nullable=False),
    sa.Column('maximum_stock_level', sa.Integer(), nullable=True),
    sa.Column('reorder_point', sa.Integer(), nullable=True),
    sa.Column('reorder_quantity', sa.Integer(), nullable=True),
    sa.Column('standard_cost', sa.Numeric(precision=10, scale=2), nullable=True),
    sa.Column('last_purchase_cost', sa.Numeric(precision=10, scale=2), nullable=True),
    sa.Column('average_cost', sa.Numeric(precision=10, scale=2), nullable=True),
    sa.Column('lifecycle_status', sa.String(length=50), nullable=False),
    sa.Column('introduction_date', sa.DateTime(), nullable=True),
    sa.Column('discontinuation_date', sa.DateTime(), nullable=True),
    sa.Column('quality_grade', sa.String(length=20), nullable=True),
    sa.Column('specifications', sa.JSON(), nullable=True),
    sa.Column('certifications', sa.JSON(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('settings', sa.JSON(), nullable=True),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_part_active', 'parts', ['is_active'], unique=False)
    op.create_index('idx_part_category', 'parts', ['category'], unique=False)
    op.create_index('idx_part_lifecycle', 'parts', ['lifecycle_status'], unique=False)
    op.create_index('idx_part_manufacturer', 'parts', ['manufacturer'], unique=False)
    op.create_index('idx_part_mfg_part_number', 'parts', ['manufacturer_part_number'], unique=False)
    op.create_index('idx_part_name', 'parts', ['name'], unique=False)
    op.create_index('idx_part_number', 'parts', ['part_number'], unique=False)
    op.create_index(op.f('ix_parts_category'), 'parts', ['category'], unique=False)
    op.create_index(op.f('ix_parts_id'), 'parts', ['id'], unique=False)
    op.create_index(op.f('ix_parts_manufacturer'), 'parts', ['manufacturer'], unique=False)
    op.create_index(op.f('ix_parts_manufacturer_part_number'), 'parts', ['manufacturer_part_number'], unique=False)
    op.create_index(op.f('ix_parts_name'), 'parts', ['name'], unique=False)
    op.create_index(op.f('ix_parts_org_id'), 'parts', ['org_id'], unique=False)
    op.create_index(op.f('ix_parts_part_number'), 'parts', ['part_number'], unique=True)
    op.create_table('permissions',
    sa.Column('name', sa.String(length=100), nullable=False),
    sa.Column('codename', sa.String(length=100), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('resource', sa.String(length=50), nullable=False),
    sa.Column('action', sa.String(length=50), nullable=False),
    sa.Column('scope', sa.String(length=50), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_permission_action', 'permissions', ['action'], unique=False)
    op.create_index('idx_permission_codename', 'permissions', ['codename'], unique=False)
    op.create_index('idx_permission_name', 'permissions', ['name'], unique=False)
    op.create_index('idx_permission_resource', 'permissions', ['resource'], unique=False)
    op.create_index('idx_permission_resource_action', 'permissions', ['resource', 'action'], unique=False)
    op.create_index(op.f('ix_permissions_action'), 'permissions', ['action'], unique=False)
    op.create_index(op.f('ix_permissions_codename'), 'permissions', ['codename'], unique=True)
    op.create_index(op.f('ix_permissions_id'), 'permissions', ['id'], unique=False)
    op.create_index(op.f('ix_permissions_name'), 'permissions', ['name'], unique=True)
    op.create_index(op.f('ix_permissions_resource'), 'permissions', ['resource'], unique=False)
    op.create_table('roles',
    sa.Column('name', sa.String(length=100), nullable=False),
    sa.Column('display_name', sa.String(length=200), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('is_system_role', sa.Boolean(), nullable=False),
    sa.Column('is_assignable', sa.Boolean(), nullable=False),
    sa.Column('scope', sa.String(length=50), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_role_assignable', 'roles', ['is_assignable'], unique=False)
    op.create_index('idx_role_name', 'roles', ['name'], unique=False)
    op.create_index('idx_role_system', 'roles', ['is_system_role'], unique=False)
    op.create_index(op.f('ix_roles_id'), 'roles', ['id'], unique=False)
    op.create_index(op.f('ix_roles_name'), 'roles', ['name'], unique=True)
    op.create_table('warehouses',
    sa.Column('name', sa.String(length=200), nullable=False),
    sa.Column('code', sa.String(length=50), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('warehouse_type', sa.String(length=50), nullable=False),
    sa.Column('address_line_1', sa.String(length=200), nullable=True),
    sa.Column('address_line_2', sa.String(length=200), nullable=True),
    sa.Column('city', sa.String(length=100), nullable=True),
    sa.Column('state', sa.String(length=100), nullable=True),
    sa.Column('postal_code', sa.String(length=20), nullable=True),
    sa.Column('country', sa.String(length=100), nullable=True),
    sa.Column('latitude', sa.String(length=20), nullable=True),
    sa.Column('longitude', sa.String(length=20), nullable=True),
    sa.Column('total_capacity_m3', sa.Numeric(precision=10, scale=2), nullable=True),
    sa.Column('available_capacity_m3', sa.Numeric(precision=10, scale=2), nullable=True),
    sa.Column('temperature_controlled', sa.Boolean(), nullable=False),
    sa.Column('security_level', sa.String(length=20), nullable=False),
    sa.Column('manager_name', sa.String(length=200), nullable=True),
    sa.Column('contact_phone', sa.String(length=50), nullable=True),
    sa.Column('contact_email', sa.String(length=320), nullable=True),
    sa.Column('operating_hours', sa.JSON(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('settings', sa.JSON(), nullable=True),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_warehouse_active', 'warehouses', ['is_active'], unique=False)
    op.create_index('idx_warehouse_code', 'warehouses', ['code'], unique=False)
    op.create_index('idx_warehouse_location', 'warehouses', ['latitude', 'longitude'], unique=False)
    op.create_index('idx_warehouse_name', 'warehouses', ['name'], unique=False)
    op.create_index('idx_warehouse_type', 'warehouses', ['warehouse_type'], unique=False)
    op.create_index(op.f('ix_warehouses_code'), 'warehouses', ['code'], unique=True)
    op.create_index(op.f('ix_warehouses_id'), 'warehouses', ['id'], unique=False)
    op.create_index(op.f('ix_warehouses_name'), 'warehouses', ['name'], unique=False)
    op.create_index(op.f('ix_warehouses_org_id'), 'warehouses', ['org_id'], unique=False)
    op.create_index(op.f('ix_warehouses_warehouse_type'), 'warehouses', ['warehouse_type'], unique=False)
    op.create_table('checklist_items',
    sa.Column('template_id', sa.Integer(), nullable=False),
    sa.Column('title', sa.String(length=300), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('instructions', sa.Text(), nullable=True),
    sa.Column('item_type', sa.String(length=50), nullable=False),
    sa.Column('category', sa.String(length=100), nullable=True),
    sa.Column('order_index', sa.Integer(), nullable=False),
    sa.Column('is_required', sa.Boolean(), nullable=False),
    sa.Column('requires_photo', sa.Boolean(), nullable=False),
    sa.Column('requires_measurement', sa.Boolean(), nullable=False),
    sa.Column('requires_note', sa.Boolean(), nullable=False),
    sa.Column('measurement_unit', sa.String(length=20), nullable=True),
    sa.Column('measurement_min', sa.Numeric(precision=10, scale=3), nullable=True),
    sa.Column('measurement_max', sa.Numeric(precision=10, scale=3), nullable=True),
    sa.Column('measurement_target', sa.Numeric(precision=10, scale=3), nullable=True),
    sa.Column('pass_criteria', sa.Text(), nullable=True),
    sa.Column('fail_criteria', sa.Text(), nullable=True),
    sa.Column('safety_critical', sa.Boolean(), nullable=False),
    sa.Column('severity_level', sa.String(length=20), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('settings', sa.JSON(), nullable=True),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['template_id'], ['checklist_templates.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_checklist_item_category', 'checklist_items', ['category'], unique=False)
    op.create_index('idx_checklist_item_order', 'checklist_items', ['order_index'], unique=False)
    op.create_index('idx_checklist_item_required', 'checklist_items', ['is_required'], unique=False)
    op.create_index('idx_checklist_item_safety', 'checklist_items', ['safety_critical'], unique=False)
    op.create_index('idx_checklist_item_severity', 'checklist_items', ['severity_level'], unique=False)
    op.create_index('idx_checklist_item_template', 'checklist_items', ['template_id'], unique=False)
    op.create_index('idx_checklist_item_type', 'checklist_items', ['item_type'], unique=False)
    op.create_index(op.f('ix_checklist_items_id'), 'checklist_items', ['id'], unique=False)
    op.create_index(op.f('ix_checklist_items_org_id'), 'checklist_items', ['org_id'], unique=False)
    op.create_index(op.f('ix_checklist_items_template_id'), 'checklist_items', ['template_id'], unique=False)
    op.create_table('clients',
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(length=200), nullable=False),
    sa.Column('display_name', sa.String(length=200), nullable=False),
    sa.Column('type', sa.String(length=50), nullable=False),
    sa.Column('contact_person', sa.String(length=200), nullable=True),
    sa.Column('email', sa.String(length=320), nullable=True),
    sa.Column('phone', sa.String(length=50), nullable=True),
    sa.Column('address_line_1', sa.String(length=200), nullable=True),
    sa.Column('address_line_2', sa.String(length=200), nullable=True),
    sa.Column('city', sa.String(length=100), nullable=True),
    sa.Column('state', sa.String(length=100), nullable=True),
    sa.Column('postal_code', sa.String(length=20), nullable=True),
    sa.Column('country', sa.String(length=100), nullable=True),
    sa.Column('contract_number', sa.String(length=100), nullable=True),
    sa.Column('contract_start_date', sa.DateTime(), nullable=True),
    sa.Column('contract_end_date', sa.DateTime(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('settings', sa.JSON(), nullable=True),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_client_active', 'clients', ['is_active'], unique=False)
    op.create_index('idx_client_contract', 'clients', ['contract_number'], unique=False)
    op.create_index('idx_client_name', 'clients', ['name'], unique=False)
    op.create_index('idx_client_org', 'clients', ['organization_id'], unique=False)
    op.create_index('idx_client_type', 'clients', ['type'], unique=False)
    op.create_index(op.f('ix_clients_id'), 'clients', ['id'], unique=False)
    op.create_index(op.f('ix_clients_name'), 'clients', ['name'], unique=False)
    op.create_index(op.f('ix_clients_org_id'), 'clients', ['org_id'], unique=False)
    op.create_index(op.f('ix_clients_organization_id'), 'clients', ['organization_id'], unique=False)
    op.create_table('inventory_items',
    sa.Column('warehouse_id', sa.Integer(), nullable=False),
    sa.Column('part_id', sa.Integer(), nullable=False),
    sa.Column('location_code', sa.String(length=50), nullable=True),
    sa.Column('zone', sa.String(length=50), nullable=True),
    sa.Column('quantity_on_hand', sa.Numeric(precision=15, scale=3), nullable=False),
    sa.Column('quantity_reserved', sa.Numeric(precision=15, scale=3), nullable=False),
    sa.Column('quantity_available', sa.Numeric(precision=15, scale=3), nullable=False),
    sa.Column('quantity_on_order', sa.Numeric(precision=15, scale=3), nullable=False),
    sa.Column('minimum_stock', sa.Numeric(precision=15, scale=3), nullable=False),
    sa.Column('maximum_stock', sa.Numeric(precision=15, scale=3), nullable=True),
    sa.Column('reorder_point', sa.Numeric(precision=15, scale=3), nullable=True),
    sa.Column('reorder_quantity', sa.Numeric(precision=15, scale=3), nullable=True),
    sa.Column('unit_cost', sa.Numeric(precision=10, scale=4), nullable=True),
    sa.Column('average_cost', sa.Numeric(precision=10, scale=4), nullable=True),
    sa.Column('last_cost', sa.Numeric(precision=10, scale=4), nullable=True),
    sa.Column('total_value', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('last_received_date', sa.DateTime(), nullable=True),
    sa.Column('last_issued_date', sa.DateTime(), nullable=True),
    sa.Column('last_counted_date', sa.DateTime(), nullable=True),
    sa.Column('cycle_count_frequency_days', sa.Integer(), nullable=True),
    sa.Column('next_cycle_count_date', sa.DateTime(), nullable=True),
    sa.Column('variance_tolerance_percentage', sa.Numeric(precision=5, scale=2), nullable=False),
    sa.Column('stock_status', sa.String(length=50), nullable=False),
    sa.Column('last_movement_type', sa.String(length=50), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('settings', sa.JSON(), nullable=True),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['part_id'], ['parts.id'], ),
    sa.ForeignKeyConstraint(['warehouse_id'], ['warehouses.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_inventory_cycle_count', 'inventory_items', ['next_cycle_count_date'], unique=False)
    op.create_index('idx_inventory_location', 'inventory_items', ['location_code'], unique=False)
    op.create_index('idx_inventory_part', 'inventory_items', ['part_id'], unique=False)
    op.create_index('idx_inventory_reorder', 'inventory_items', ['reorder_point'], unique=False)
    op.create_index('idx_inventory_status', 'inventory_items', ['stock_status'], unique=False)
    op.create_index('idx_inventory_warehouse', 'inventory_items', ['warehouse_id'], unique=False)
    op.create_index(op.f('ix_inventory_items_id'), 'inventory_items', ['id'], unique=False)
    op.create_index(op.f('ix_inventory_items_location_code'), 'inventory_items', ['location_code'], unique=False)
    op.create_index(op.f('ix_inventory_items_org_id'), 'inventory_items', ['org_id'], unique=False)
    op.create_index(op.f('ix_inventory_items_part_id'), 'inventory_items', ['part_id'], unique=False)
    op.create_index(op.f('ix_inventory_items_warehouse_id'), 'inventory_items', ['warehouse_id'], unique=False)
    op.create_table('role_permissions',
    sa.Column('role_id', sa.Integer(), nullable=False),
    sa.Column('permission_id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['permission_id'], ['permissions.id'], ),
    sa.ForeignKeyConstraint(['role_id'], ['roles.id'], ),
    sa.PrimaryKeyConstraint('role_id', 'permission_id')
    )
    op.create_index('idx_role_perm_permission', 'role_permissions', ['permission_id'], unique=False)
    op.create_index('idx_role_perm_role', 'role_permissions', ['role_id'], unique=False)
    op.create_table('users',
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('username', sa.String(length=50), nullable=False),
    sa.Column('email', sa.String(length=320), nullable=False),
    sa.Column('first_name', sa.String(length=100), nullable=False),
    sa.Column('last_name', sa.String(length=100), nullable=False),
    sa.Column('display_name', sa.String(length=200), nullable=True),
    sa.Column('password_hash', sa.String(length=255), nullable=False),
    sa.Column('email_verified', sa.Boolean(), nullable=False),
    sa.Column('email_verification_token', sa.String(length=100), nullable=True),
    sa.Column('password_reset_token', sa.String(length=100), nullable=True),
    sa.Column('password_reset_expires', sa.DateTime(), nullable=True),
    sa.Column('phone', sa.String(length=50), nullable=True),
    sa.Column('mobile', sa.String(length=50), nullable=True),
    sa.Column('job_title', sa.String(length=100), nullable=True),
    sa.Column('department', sa.String(length=100), nullable=True),
    sa.Column('employee_id', sa.String(length=50), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_superuser', sa.Boolean(), nullable=False),
    sa.Column('is_verified', sa.Boolean(), nullable=False),
    sa.Column('last_login', sa.DateTime(), nullable=True),
    sa.Column('last_activity', sa.DateTime(), nullable=True),
    sa.Column('login_count', sa.Integer(), nullable=False),
    sa.Column('failed_login_attempts', sa.Integer(), nullable=False),
    sa.Column('account_locked_until', sa.DateTime(), nullable=True),
    sa.Column('timezone', sa.String(length=50), nullable=False),
    sa.Column('language', sa.String(length=10), nullable=False),
    sa.Column('theme', sa.String(length=20), nullable=False),
    sa.Column('settings', sa.JSON(), nullable=True),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('email_verification_token'),
    sa.UniqueConstraint('password_reset_token')
    )
    op.create_index('idx_user_active', 'users', ['is_active'], unique=False)
    op.create_index('idx_user_email', 'users', ['email'], unique=False)
    op.create_index('idx_user_employee_id', 'users', ['employee_id'], unique=False)
    op.create_index('idx_user_last_login', 'users', ['last_login'], unique=False)
    op.create_index('idx_user_org', 'users', ['organization_id'], unique=False)
    op.create_index('idx_user_username', 'users', ['username'], unique=False)
    op.create_index(op.f('ix_users_email'), 'users', ['email'], unique=True)
    op.create_index(op.f('ix_users_employee_id'), 'users', ['employee_id'], unique=False)
    op.create_index(op.f('ix_users_id'), 'users', ['id'], unique=False)
    op.create_index(op.f('ix_users_org_id'), 'users', ['org_id'], unique=False)
    op.create_index(op.f('ix_users_organization_id'), 'users', ['organization_id'], unique=False)
    op.create_index(op.f('ix_users_username'), 'users', ['username'], unique=True)
    op.create_table('webhooks',
    sa.Column('integration_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(length=200), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('endpoint_url', sa.String(length=1000), nullable=False),
    sa.Column('events', sa.JSON(), nullable=False),
    sa.Column('filters', sa.JSON(), nullable=True),
    sa.Column('secret', sa.String(length=200), nullable=True),
    sa.Column('verify_ssl', sa.Boolean(), nullable=False),
    sa.Column('max_retries', sa.Integer(), nullable=False),
    sa.Column('retry_delay_seconds', sa.Integer(), nullable=False),
    sa.Column('timeout_seconds', sa.Integer(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('last_triggered_at', sa.DateTime(), nullable=True),
    sa.Column('last_success_at', sa.DateTime(), nullable=True),
    sa.Column('last_failure_at', sa.DateTime(), nullable=True),
    sa.Column('total_triggers', sa.Integer(), nullable=False),
    sa.Column('successful_deliveries', sa.Integer(), nullable=False),
    sa.Column('failed_deliveries', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['integration_id'], ['integrations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_webhook_active', 'webhooks', ['is_active'], unique=False)
    op.create_index('idx_webhook_integration', 'webhooks', ['integration_id'], unique=False)
    op.create_index('idx_webhook_last_triggered', 'webhooks', ['last_triggered_at'], unique=False)
    op.create_index(op.f('ix_webhooks_id'), 'webhooks', ['id'], unique=False)
    op.create_index(op.f('ix_webhooks_integration_id'), 'webhooks', ['integration_id'], unique=False)
    op.create_index(op.f('ix_webhooks_org_id'), 'webhooks', ['org_id'], unique=False)
    op.create_table('api_keys',
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(length=200), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('key_hash', sa.String(length=255), nullable=False),
    sa.Column('key_prefix', sa.String(length=10), nullable=False),
    sa.Column('scopes', sa.JSON(), nullable=True),
    sa.Column('permissions', sa.JSON(), nullable=True),
    sa.Column('last_used_at', sa.DateTime(), nullable=True),
    sa.Column('use_count', sa.Integer(), nullable=False),
    sa.Column('expires_at', sa.DateTime(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_api_key_active', 'api_keys', ['is_active'], unique=False)
    op.create_index('idx_api_key_expires', 'api_keys', ['expires_at'], unique=False)
    op.create_index('idx_api_key_hash', 'api_keys', ['key_hash'], unique=False)
    op.create_index('idx_api_key_prefix', 'api_keys', ['key_prefix'], unique=False)
    op.create_index('idx_api_key_user', 'api_keys', ['user_id'], unique=False)
    op.create_index(op.f('ix_api_keys_expires_at'), 'api_keys', ['expires_at'], unique=False)
    op.create_index(op.f('ix_api_keys_id'), 'api_keys', ['id'], unique=False)
    op.create_index(op.f('ix_api_keys_key_hash'), 'api_keys', ['key_hash'], unique=True)
    op.create_index(op.f('ix_api_keys_key_prefix'), 'api_keys', ['key_prefix'], unique=False)
    op.create_index(op.f('ix_api_keys_org_id'), 'api_keys', ['org_id'], unique=False)
    op.create_index(op.f('ix_api_keys_user_id'), 'api_keys', ['user_id'], unique=False)
    op.create_table('audit_logs',
    sa.Column('entity_type', sa.String(length=100), nullable=False),
    sa.Column('entity_id', sa.Integer(), nullable=False),
    sa.Column('action', sa.String(length=50), nullable=False),
    sa.Column('action_description', sa.String(length=500), nullable=True),
    sa.Column('user_id', sa.Integer(), nullable=True),
    sa.Column('username', sa.String(length=100), nullable=True),
    sa.Column('organization_id', sa.Integer(), nullable=True),
    sa.Column('session_id', sa.String(length=100), nullable=True),
    sa.Column('ip_address', sa.String(45), nullable=True),
    sa.Column('user_agent', sa.Text(), nullable=True),
    sa.Column('old_values', sa.JSON(), nullable=True),
    sa.Column('new_values', sa.JSON(), nullable=True),
    sa.Column('changed_fields', sa.JSON(), nullable=True),
    sa.Column('request_method', sa.String(length=10), nullable=True),
    sa.Column('request_path', sa.String(length=1000), nullable=True),
    sa.Column('request_id', sa.String(length=100), nullable=True),
    sa.Column('timestamp', sa.DateTime(), nullable=False),
    sa.Column('duration_ms', sa.Integer(), nullable=True),
    sa.Column('success', sa.Boolean(), nullable=False),
    sa.Column('error_message', sa.Text(), nullable=True),
    sa.Column('risk_level', sa.String(length=20), nullable=False),
    sa.Column('compliance_flags', sa.JSON(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_audit_action', 'audit_logs', ['action'], unique=False)
    op.create_index('idx_audit_entity', 'audit_logs', ['entity_type', 'entity_id'], unique=False)
    op.create_index('idx_audit_org', 'audit_logs', ['organization_id'], unique=False)
    op.create_index('idx_audit_request', 'audit_logs', ['request_id'], unique=False)
    op.create_index('idx_audit_risk', 'audit_logs', ['risk_level'], unique=False)
    op.create_index('idx_audit_session', 'audit_logs', ['session_id'], unique=False)
    op.create_index('idx_audit_success', 'audit_logs', ['success'], unique=False)
    op.create_index('idx_audit_timestamp', 'audit_logs', ['timestamp'], unique=False)
    op.create_index('idx_audit_user', 'audit_logs', ['user_id'], unique=False)
    op.create_index(op.f('ix_audit_logs_action'), 'audit_logs', ['action'], unique=False)
    op.create_index(op.f('ix_audit_logs_entity_id'), 'audit_logs', ['entity_id'], unique=False)
    op.create_index(op.f('ix_audit_logs_entity_type'), 'audit_logs', ['entity_type'], unique=False)
    op.create_index(op.f('ix_audit_logs_id'), 'audit_logs', ['id'], unique=False)
    op.create_index(op.f('ix_audit_logs_organization_id'), 'audit_logs', ['organization_id'], unique=False)
    op.create_index(op.f('ix_audit_logs_request_id'), 'audit_logs', ['request_id'], unique=False)
    op.create_index(op.f('ix_audit_logs_session_id'), 'audit_logs', ['session_id'], unique=False)
    op.create_index(op.f('ix_audit_logs_timestamp'), 'audit_logs', ['timestamp'], unique=False)
    op.create_index(op.f('ix_audit_logs_user_id'), 'audit_logs', ['user_id'], unique=False)
    op.create_table('documents',
    sa.Column('entity_type', sa.String(length=50), nullable=False),
    sa.Column('entity_id', sa.Integer(), nullable=False),
    sa.Column('filename', sa.String(length=500), nullable=False),
    sa.Column('original_filename', sa.String(length=500), nullable=False),
    sa.Column('title', sa.String(length=300), nullable=True),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('content_type', sa.String(length=200), nullable=False),
    sa.Column('file_size', sa.Integer(), nullable=False),
    sa.Column('file_hash', sa.String(length=64), nullable=False),
    sa.Column('storage_backend', sa.String(length=50), nullable=False),
    sa.Column('storage_key', sa.String(length=1000), nullable=False),
    sa.Column('storage_bucket', sa.String(length=200), nullable=True),
    sa.Column('category', sa.String(length=100), nullable=False),
    sa.Column('tags', sa.JSON(), nullable=True),
    sa.Column('is_public', sa.Boolean(), nullable=False),
    sa.Column('access_level', sa.String(length=50), nullable=False),
    sa.Column('uploaded_by', sa.Integer(), nullable=True),
    sa.Column('uploaded_at', sa.DateTime(), nullable=False),
    sa.Column('version', sa.String(length=20), nullable=False),
    sa.Column('previous_version_id', sa.Integer(), nullable=True),
    sa.Column('is_current_version', sa.Boolean(), nullable=False),
    sa.Column('processing_status', sa.String(length=50), nullable=False),
    sa.Column('ocr_text', sa.Text(), nullable=True),
    sa.Column('expires_at', sa.DateTime(), nullable=True),
    sa.Column('retention_period_days', sa.Integer(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('settings', sa.JSON(), nullable=True),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['previous_version_id'], ['documents.id'], ),
    sa.ForeignKeyConstraint(['uploaded_by'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_document_access', 'documents', ['access_level'], unique=False)
    op.create_index('idx_document_category', 'documents', ['category'], unique=False)
    op.create_index('idx_document_current', 'documents', ['is_current_version'], unique=False)
    op.create_index('idx_document_entity', 'documents', ['entity_type', 'entity_id'], unique=False)
    op.create_index('idx_document_expires', 'documents', ['expires_at'], unique=False)
    op.create_index('idx_document_hash', 'documents', ['file_hash'], unique=False)
    op.create_index('idx_document_uploaded', 'documents', ['uploaded_at'], unique=False)
    op.create_index('idx_document_uploader', 'documents', ['uploaded_by'], unique=False)
    op.create_index(op.f('ix_documents_category'), 'documents', ['category'], unique=False)
    op.create_index(op.f('ix_documents_entity_id'), 'documents', ['entity_id'], unique=False)
    op.create_index(op.f('ix_documents_entity_type'), 'documents', ['entity_type'], unique=False)
    op.create_index(op.f('ix_documents_file_hash'), 'documents', ['file_hash'], unique=False)
    op.create_index(op.f('ix_documents_id'), 'documents', ['id'], unique=False)
    op.create_index(op.f('ix_documents_org_id'), 'documents', ['org_id'], unique=False)
    op.create_index(op.f('ix_documents_uploaded_at'), 'documents', ['uploaded_at'], unique=False)
    op.create_index(op.f('ix_documents_uploaded_by'), 'documents', ['uploaded_by'], unique=False)
    op.create_table('events',
    sa.Column('event_type', sa.String(length=100), nullable=False),
    sa.Column('event_name', sa.String(length=200), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('entity_type', sa.String(length=100), nullable=True),
    sa.Column('entity_id', sa.Integer(), nullable=True),
    sa.Column('event_data', sa.JSON(), nullable=True),
    sa.Column('event_metadata', sa.JSON(), nullable=True),
    sa.Column('occurred_at', sa.DateTime(), nullable=False),
    sa.Column('scheduled_for', sa.DateTime(), nullable=True),
    sa.Column('processing_status', sa.String(length=50), nullable=False),
    sa.Column('processed_at', sa.DateTime(), nullable=True),
    sa.Column('processing_attempts', sa.Integer(), nullable=False),
    sa.Column('last_error', sa.Text(), nullable=True),
    sa.Column('priority', sa.String(length=20), nullable=False),
    sa.Column('severity', sa.String(length=20), nullable=False),
    sa.Column('category', sa.String(length=100), nullable=True),
    sa.Column('tags', sa.JSON(), nullable=True),
    sa.Column('source_system', sa.String(length=100), nullable=True),
    sa.Column('source_user_id', sa.Integer(), nullable=True),
    sa.Column('source_ip', sa.String(45), nullable=True),
    sa.Column('notifications_sent', sa.Boolean(), nullable=False),
    sa.Column('notification_count', sa.Integer(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('settings', sa.JSON(), nullable=True),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['source_user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_event_category', 'events', ['category'], unique=False)
    op.create_index('idx_event_entity', 'events', ['entity_type', 'entity_id'], unique=False)
    op.create_index('idx_event_occurred', 'events', ['occurred_at'], unique=False)
    op.create_index('idx_event_priority', 'events', ['priority'], unique=False)
    op.create_index('idx_event_processing', 'events', ['processing_status'], unique=False)
    op.create_index('idx_event_scheduled', 'events', ['scheduled_for'], unique=False)
    op.create_index('idx_event_severity', 'events', ['severity'], unique=False)
    op.create_index('idx_event_source', 'events', ['source_user_id'], unique=False)
    op.create_index('idx_event_type', 'events', ['event_type'], unique=False)
    op.create_index(op.f('ix_events_category'), 'events', ['category'], unique=False)
    op.create_index(op.f('ix_events_entity_id'), 'events', ['entity_id'], unique=False)
    op.create_index(op.f('ix_events_entity_type'), 'events', ['entity_type'], unique=False)
    op.create_index(op.f('ix_events_event_type'), 'events', ['event_type'], unique=False)
    op.create_index(op.f('ix_events_id'), 'events', ['id'], unique=False)
    op.create_index(op.f('ix_events_occurred_at'), 'events', ['occurred_at'], unique=False)
    op.create_index(op.f('ix_events_org_id'), 'events', ['org_id'], unique=False)
    op.create_index(op.f('ix_events_scheduled_for'), 'events', ['scheduled_for'], unique=False)
    op.create_index(op.f('ix_events_source_user_id'), 'events', ['source_user_id'], unique=False)
    op.create_table('role_assignments',
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('role_id', sa.Integer(), nullable=False),
    sa.Column('scope_type', sa.String(length=20), nullable=False),
    sa.Column('scope_id', sa.Integer(), nullable=True),
    sa.Column('assigned_by_user_id', sa.Integer(), nullable=True),
    sa.Column('assigned_at', sa.DateTime(), nullable=False),
    sa.Column('expires_at', sa.DateTime(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['assigned_by_user_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['role_id'], ['roles.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_role_assignment_active', 'role_assignments', ['is_active'], unique=False)
    op.create_index('idx_role_assignment_expires', 'role_assignments', ['expires_at'], unique=False)
    op.create_index('idx_role_assignment_role', 'role_assignments', ['role_id'], unique=False)
    op.create_index('idx_role_assignment_scope', 'role_assignments', ['scope_type', 'scope_id'], unique=False)
    op.create_index('idx_role_assignment_user', 'role_assignments', ['user_id'], unique=False)
    op.create_index(op.f('ix_role_assignments_id'), 'role_assignments', ['id'], unique=False)
    op.create_index(op.f('ix_role_assignments_org_id'), 'role_assignments', ['org_id'], unique=False)
    op.create_index(op.f('ix_role_assignments_role_id'), 'role_assignments', ['role_id'], unique=False)
    op.create_index(op.f('ix_role_assignments_user_id'), 'role_assignments', ['user_id'], unique=False)
    op.create_table('sites',
    sa.Column('client_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(length=200), nullable=False),
    sa.Column('display_name', sa.String(length=200), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('site_code', sa.String(length=50), nullable=True),
    sa.Column('address_line_1', sa.String(length=200), nullable=True),
    sa.Column('address_line_2', sa.String(length=200), nullable=True),
    sa.Column('city', sa.String(length=100), nullable=True),
    sa.Column('state', sa.String(length=100), nullable=True),
    sa.Column('postal_code', sa.String(length=20), nullable=True),
    sa.Column('country', sa.String(length=100), nullable=True),
    sa.Column('latitude', sa.String(length=20), nullable=True),
    sa.Column('longitude', sa.String(length=20), nullable=True),
    sa.Column('area_sqm', sa.Integer(), nullable=True),
    sa.Column('access_instructions', sa.Text(), nullable=True),
    sa.Column('emergency_contact', sa.String(length=200), nullable=True),
    sa.Column('emergency_phone', sa.String(length=50), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('settings', sa.JSON(), nullable=True),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['client_id'], ['clients.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_site_active', 'sites', ['is_active'], unique=False)
    op.create_index('idx_site_client', 'sites', ['client_id'], unique=False)
    op.create_index('idx_site_code', 'sites', ['site_code'], unique=False)
    op.create_index('idx_site_location', 'sites', ['latitude', 'longitude'], unique=False)
    op.create_index('idx_site_name', 'sites', ['name'], unique=False)
    op.create_index(op.f('ix_sites_client_id'), 'sites', ['client_id'], unique=False)
    op.create_index(op.f('ix_sites_id'), 'sites', ['id'], unique=False)
    op.create_index(op.f('ix_sites_name'), 'sites', ['name'], unique=False)
    op.create_index(op.f('ix_sites_org_id'), 'sites', ['org_id'], unique=False)
    op.create_index(op.f('ix_sites_site_code'), 'sites', ['site_code'], unique=True)
    op.create_table('stock_movements',
    sa.Column('warehouse_id', sa.Integer(), nullable=False),
    sa.Column('inventory_item_id', sa.Integer(), nullable=False),
    sa.Column('part_id', sa.Integer(), nullable=False),
    sa.Column('movement_type', sa.String(length=50), nullable=False),
    sa.Column('movement_reason', sa.String(length=100), nullable=True),
    sa.Column('reference_type', sa.String(length=50), nullable=True),
    sa.Column('reference_id', sa.Integer(), nullable=True),
    sa.Column('quantity', sa.Numeric(precision=15, scale=3), nullable=False),
    sa.Column('unit_cost', sa.Numeric(precision=10, scale=4), nullable=True),
    sa.Column('total_cost', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('quantity_before', sa.Numeric(precision=15, scale=3), nullable=False),
    sa.Column('quantity_after', sa.Numeric(precision=15, scale=3), nullable=False),
    sa.Column('movement_date', sa.DateTime(), nullable=False),
    sa.Column('processed_by', sa.String(length=200), nullable=True),
    sa.Column('processed_by_user_id', sa.Integer(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('location_from', sa.String(length=100), nullable=True),
    sa.Column('location_to', sa.String(length=100), nullable=True),
    sa.Column('document_number', sa.String(length=100), nullable=True),
    sa.Column('batch_number', sa.String(length=100), nullable=True),
    sa.Column('serial_number', sa.String(length=100), nullable=True),
    sa.Column('status', sa.String(length=50), nullable=False),
    sa.Column('is_validated', sa.Boolean(), nullable=False),
    sa.Column('validated_by', sa.String(length=200), nullable=True),
    sa.Column('validated_at', sa.DateTime(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('settings', sa.JSON(), nullable=True),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['inventory_item_id'], ['inventory_items.id'], ),
    sa.ForeignKeyConstraint(['part_id'], ['parts.id'], ),
    sa.ForeignKeyConstraint(['processed_by_user_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['warehouse_id'], ['warehouses.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_stock_movement_date', 'stock_movements', ['movement_date'], unique=False)
    op.create_index('idx_stock_movement_document', 'stock_movements', ['document_number'], unique=False)
    op.create_index('idx_stock_movement_inventory', 'stock_movements', ['inventory_item_id'], unique=False)
    op.create_index('idx_stock_movement_part', 'stock_movements', ['part_id'], unique=False)
    op.create_index('idx_stock_movement_reference', 'stock_movements', ['reference_type', 'reference_id'], unique=False)
    op.create_index('idx_stock_movement_status', 'stock_movements', ['status'], unique=False)
    op.create_index('idx_stock_movement_type', 'stock_movements', ['movement_type'], unique=False)
    op.create_index('idx_stock_movement_warehouse', 'stock_movements', ['warehouse_id'], unique=False)
    op.create_index(op.f('ix_stock_movements_document_number'), 'stock_movements', ['document_number'], unique=False)
    op.create_index(op.f('ix_stock_movements_id'), 'stock_movements', ['id'], unique=False)
    op.create_index(op.f('ix_stock_movements_inventory_item_id'), 'stock_movements', ['inventory_item_id'], unique=False)
    op.create_index(op.f('ix_stock_movements_movement_date'), 'stock_movements', ['movement_date'], unique=False)
    op.create_index(op.f('ix_stock_movements_movement_reason'), 'stock_movements', ['movement_reason'], unique=False)
    op.create_index(op.f('ix_stock_movements_movement_type'), 'stock_movements', ['movement_type'], unique=False)
    op.create_index(op.f('ix_stock_movements_org_id'), 'stock_movements', ['org_id'], unique=False)
    op.create_index(op.f('ix_stock_movements_part_id'), 'stock_movements', ['part_id'], unique=False)
    op.create_index(op.f('ix_stock_movements_processed_by_user_id'), 'stock_movements', ['processed_by_user_id'], unique=False)
    op.create_index(op.f('ix_stock_movements_reference_id'), 'stock_movements', ['reference_id'], unique=False)
    op.create_index(op.f('ix_stock_movements_warehouse_id'), 'stock_movements', ['warehouse_id'], unique=False)
    op.create_table('totp_secrets',
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('secret', sa.LargeBinary(), nullable=False),
    sa.Column('backup_codes', sa.JSON(), nullable=True),
    sa.Column('device_name', sa.String(length=200), nullable=True),
    sa.Column('issuer', sa.String(length=100), nullable=False),
    sa.Column('is_verified', sa.Boolean(), nullable=False),
    sa.Column('verified_at', sa.DateTime(), nullable=True),
    sa.Column('last_used_at', sa.DateTime(), nullable=True),
    sa.Column('use_count', sa.Integer(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_totp_active', 'totp_secrets', ['is_active'], unique=False)
    op.create_index('idx_totp_user', 'totp_secrets', ['user_id'], unique=False)
    op.create_index('idx_totp_verified', 'totp_secrets', ['is_verified'], unique=False)
    op.create_index(op.f('ix_totp_secrets_id'), 'totp_secrets', ['id'], unique=False)
    op.create_index(op.f('ix_totp_secrets_org_id'), 'totp_secrets', ['org_id'], unique=False)
    op.create_index(op.f('ix_totp_secrets_user_id'), 'totp_secrets', ['user_id'], unique=False)
    op.create_table('webauthn_credentials',
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('credential_id', sa.LargeBinary(), nullable=False),
    sa.Column('public_key', sa.LargeBinary(), nullable=False),
    sa.Column('sign_count', sa.Integer(), nullable=False),
    sa.Column('device_name', sa.String(length=200), nullable=True),
    sa.Column('device_type', sa.String(length=50), nullable=True),
    sa.Column('aaguid', sa.String(length=36), nullable=True),
    sa.Column('registered_at', sa.DateTime(), nullable=False),
    sa.Column('last_used_at', sa.DateTime(), nullable=True),
    sa.Column('use_count', sa.Integer(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_webauthn_active', 'webauthn_credentials', ['is_active'], unique=False)
    op.create_index('idx_webauthn_credential_id', 'webauthn_credentials', ['credential_id'], unique=False)
    op.create_index('idx_webauthn_last_used', 'webauthn_credentials', ['last_used_at'], unique=False)
    op.create_index('idx_webauthn_user', 'webauthn_credentials', ['user_id'], unique=False)
    op.create_index(op.f('ix_webauthn_credentials_credential_id'), 'webauthn_credentials', ['credential_id'], unique=True)
    op.create_index(op.f('ix_webauthn_credentials_id'), 'webauthn_credentials', ['id'], unique=False)
    op.create_index(op.f('ix_webauthn_credentials_org_id'), 'webauthn_credentials', ['org_id'], unique=False)
    op.create_index(op.f('ix_webauthn_credentials_user_id'), 'webauthn_credentials', ['user_id'], unique=False)
    op.create_table('buildings',
    sa.Column('site_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(length=200), nullable=False),
    sa.Column('display_name', sa.String(length=200), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('building_code', sa.String(length=50), nullable=True),
    sa.Column('building_type', sa.String(length=50), nullable=True),
    sa.Column('floors', sa.Integer(), nullable=True),
    sa.Column('units', sa.Integer(), nullable=True),
    sa.Column('year_built', sa.Integer(), nullable=True),
    sa.Column('address_suffix', sa.String(length=100), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('settings', sa.JSON(), nullable=True),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['site_id'], ['sites.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_building_active', 'buildings', ['is_active'], unique=False)
    op.create_index('idx_building_code', 'buildings', ['building_code'], unique=False)
    op.create_index('idx_building_name', 'buildings', ['name'], unique=False)
    op.create_index('idx_building_site', 'buildings', ['site_id'], unique=False)
    op.create_index('idx_building_type', 'buildings', ['building_type'], unique=False)
    op.create_index(op.f('ix_buildings_building_code'), 'buildings', ['building_code'], unique=False)
    op.create_index(op.f('ix_buildings_id'), 'buildings', ['id'], unique=False)
    op.create_index(op.f('ix_buildings_name'), 'buildings', ['name'], unique=False)
    op.create_index(op.f('ix_buildings_org_id'), 'buildings', ['org_id'], unique=False)
    op.create_index(op.f('ix_buildings_site_id'), 'buildings', ['site_id'], unique=False)
    op.create_table('media_objects',
    sa.Column('document_id', sa.Integer(), nullable=False),
    sa.Column('media_type', sa.String(length=50), nullable=False),
    sa.Column('mime_type', sa.String(length=200), nullable=False),
    sa.Column('original_width', sa.Integer(), nullable=True),
    sa.Column('original_height', sa.Integer(), nullable=True),
    sa.Column('duration_seconds', sa.Integer(), nullable=True),
    sa.Column('frame_rate', sa.String(length=20), nullable=True),
    sa.Column('thumbnail_key', sa.String(length=1000), nullable=True),
    sa.Column('preview_key', sa.String(length=1000), nullable=True),
    sa.Column('exif_data', sa.JSON(), nullable=True),
    sa.Column('gps_latitude', sa.String(length=20), nullable=True),
    sa.Column('gps_longitude', sa.String(length=20), nullable=True),
    sa.Column('camera_make', sa.String(length=100), nullable=True),
    sa.Column('camera_model', sa.String(length=100), nullable=True),
    sa.Column('taken_at', sa.DateTime(), nullable=True),
    sa.Column('processing_status', sa.String(length=50), nullable=False),
    sa.Column('processed_at', sa.DateTime(), nullable=True),
    sa.Column('processing_errors', sa.Text(), nullable=True),
    sa.Column('quality_score', sa.Integer(), nullable=True),
    sa.Column('blur_detection', sa.Boolean(), nullable=True),
    sa.Column('contains_text', sa.Boolean(), nullable=True),
    sa.Column('extracted_text', sa.Text(), nullable=True),
    sa.Column('object_detection', sa.JSON(), nullable=True),
    sa.Column('classification_tags', sa.JSON(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('settings', sa.JSON(), nullable=True),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['document_id'], ['documents.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_media_document', 'media_objects', ['document_id'], unique=False)
    op.create_index('idx_media_gps', 'media_objects', ['gps_latitude', 'gps_longitude'], unique=False)
    op.create_index('idx_media_processing', 'media_objects', ['processing_status'], unique=False)
    op.create_index('idx_media_taken', 'media_objects', ['taken_at'], unique=False)
    op.create_index('idx_media_type', 'media_objects', ['media_type'], unique=False)
    op.create_index(op.f('ix_media_objects_document_id'), 'media_objects', ['document_id'], unique=False)
    op.create_index(op.f('ix_media_objects_id'), 'media_objects', ['id'], unique=False)
    op.create_index(op.f('ix_media_objects_media_type'), 'media_objects', ['media_type'], unique=False)
    op.create_index(op.f('ix_media_objects_org_id'), 'media_objects', ['org_id'], unique=False)
    op.create_table('gates',
    sa.Column('building_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(length=200), nullable=False),
    sa.Column('display_name', sa.String(length=200), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('gate_code', sa.String(length=50), nullable=True),
    sa.Column('gate_type', sa.String(length=50), nullable=False),
    sa.Column('manufacturer', sa.String(length=100), nullable=True),
    sa.Column('model', sa.String(length=100), nullable=True),
    sa.Column('serial_number', sa.String(length=100), nullable=True),
    sa.Column('installation_date', sa.DateTime(), nullable=True),
    sa.Column('installer', sa.String(length=200), nullable=True),
    sa.Column('warranty_end_date', sa.DateTime(), nullable=True),
    sa.Column('width_cm', sa.Integer(), nullable=True),
    sa.Column('height_cm', sa.Integer(), nullable=True),
    sa.Column('weight_kg', sa.Integer(), nullable=True),
    sa.Column('material', sa.String(length=100), nullable=True),
    sa.Column('max_opening_cycles_per_day', sa.Integer(), nullable=True),
    sa.Column('current_cycle_count', sa.Integer(), nullable=False),
    sa.Column('last_maintenance_date', sa.DateTime(), nullable=True),
    sa.Column('next_maintenance_date', sa.DateTime(), nullable=True),
    sa.Column('status', sa.String(length=50), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('settings', sa.JSON(), nullable=True),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['building_id'], ['buildings.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_gate_active', 'gates', ['is_active'], unique=False)
    op.create_index('idx_gate_building', 'gates', ['building_id'], unique=False)
    op.create_index('idx_gate_code', 'gates', ['gate_code'], unique=False)
    op.create_index('idx_gate_maintenance', 'gates', ['next_maintenance_date'], unique=False)
    op.create_index('idx_gate_manufacturer', 'gates', ['manufacturer'], unique=False)
    op.create_index('idx_gate_name', 'gates', ['name'], unique=False)
    op.create_index('idx_gate_serial', 'gates', ['serial_number'], unique=False)
    op.create_index('idx_gate_status', 'gates', ['status'], unique=False)
    op.create_index('idx_gate_type', 'gates', ['gate_type'], unique=False)
    op.create_index(op.f('ix_gates_building_id'), 'gates', ['building_id'], unique=False)
    op.create_index(op.f('ix_gates_gate_code'), 'gates', ['gate_code'], unique=True)
    op.create_index(op.f('ix_gates_id'), 'gates', ['id'], unique=False)
    op.create_index(op.f('ix_gates_name'), 'gates', ['name'], unique=False)
    op.create_index(op.f('ix_gates_org_id'), 'gates', ['org_id'], unique=False)
    op.create_index(op.f('ix_gates_serial_number'), 'gates', ['serial_number'], unique=False)
    op.create_table('gate_components',
    sa.Column('gate_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(length=200), nullable=False),
    sa.Column('component_type', sa.String(length=100), nullable=False),
    sa.Column('category', sa.String(length=100), nullable=True),
    sa.Column('manufacturer', sa.String(length=100), nullable=True),
    sa.Column('model', sa.String(length=100), nullable=True),
    sa.Column('part_number', sa.String(length=100), nullable=True),
    sa.Column('serial_number', sa.String(length=100), nullable=True),
    sa.Column('installation_date', sa.DateTime(), nullable=True),
    sa.Column('installer', sa.String(length=200), nullable=True),
    sa.Column('location_description', sa.String(length=500), nullable=True),
    sa.Column('warranty_start_date', sa.DateTime(), nullable=True),
    sa.Column('warranty_end_date', sa.DateTime(), nullable=True),
    sa.Column('expected_lifespan_months', sa.Integer(), nullable=True),
    sa.Column('replacement_recommendation_date', sa.DateTime(), nullable=True),
    sa.Column('cycle_count', sa.Integer(), nullable=False),
    sa.Column('max_cycles', sa.Integer(), nullable=True),
    sa.Column('operating_hours', sa.Integer(), nullable=False),
    sa.Column('max_operating_hours', sa.Integer(), nullable=True),
    sa.Column('specifications', sa.JSON(), nullable=True),
    sa.Column('last_maintenance_date', sa.DateTime(), nullable=True),
    sa.Column('next_maintenance_date', sa.DateTime(), nullable=True),
    sa.Column('maintenance_interval_days', sa.Integer(), nullable=True),
    sa.Column('condition', sa.String(length=50), nullable=False),
    sa.Column('status', sa.String(length=50), nullable=False),
    sa.Column('condition_notes', sa.Text(), nullable=True),
    sa.Column('purchase_cost', sa.Numeric(precision=10, scale=2), nullable=True),
    sa.Column('installation_cost', sa.Numeric(precision=10, scale=2), nullable=True),
    sa.Column('replacement_cost_estimate', sa.Numeric(precision=10, scale=2), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('settings', sa.JSON(), nullable=True),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['gate_id'], ['gates.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_component_condition', 'gate_components', ['condition'], unique=False)
    op.create_index('idx_component_gate', 'gate_components', ['gate_id'], unique=False)
    op.create_index('idx_component_maintenance', 'gate_components', ['next_maintenance_date'], unique=False)
    op.create_index('idx_component_name', 'gate_components', ['name'], unique=False)
    op.create_index('idx_component_part_number', 'gate_components', ['part_number'], unique=False)
    op.create_index('idx_component_replacement', 'gate_components', ['replacement_recommendation_date'], unique=False)
    op.create_index('idx_component_serial', 'gate_components', ['serial_number'], unique=False)
    op.create_index('idx_component_status', 'gate_components', ['status'], unique=False)
    op.create_index('idx_component_type', 'gate_components', ['component_type'], unique=False)
    op.create_index('idx_component_warranty', 'gate_components', ['warranty_end_date'], unique=False)
    op.create_index(op.f('ix_gate_components_component_type'), 'gate_components', ['component_type'], unique=False)
    op.create_index(op.f('ix_gate_components_gate_id'), 'gate_components', ['gate_id'], unique=False)
    op.create_index(op.f('ix_gate_components_id'), 'gate_components', ['id'], unique=False)
    op.create_index(op.f('ix_gate_components_name'), 'gate_components', ['name'], unique=False)
    op.create_index(op.f('ix_gate_components_org_id'), 'gate_components', ['org_id'], unique=False)
    op.create_index(op.f('ix_gate_components_part_number'), 'gate_components', ['part_number'], unique=False)
    op.create_index(op.f('ix_gate_components_serial_number'), 'gate_components', ['serial_number'], unique=False)
    op.create_table('inspections',
    sa.Column('gate_id', sa.Integer(), nullable=False),
    sa.Column('checklist_template_id', sa.Integer(), nullable=False),
    sa.Column('inspection_date', sa.DateTime(), nullable=False),
    sa.Column('inspector_name', sa.String(length=200), nullable=False),
    sa.Column('inspector_id', sa.Integer(), nullable=True),
    sa.Column('inspection_type', sa.String(length=50), nullable=False),
    sa.Column('reason', sa.String(length=500), nullable=True),
    sa.Column('weather_conditions', sa.String(length=200), nullable=True),
    sa.Column('temperature_celsius', sa.Integer(), nullable=True),
    sa.Column('humidity_percentage', sa.Integer(), nullable=True),
    sa.Column('overall_status', sa.String(length=50), nullable=False),
    sa.Column('overall_score', sa.Numeric(precision=5, scale=2), nullable=True),
    sa.Column('started_at', sa.DateTime(), nullable=True),
    sa.Column('completed_at', sa.DateTime(), nullable=True),
    sa.Column('duration_minutes', sa.Integer(), nullable=True),
    sa.Column('requires_followup', sa.Boolean(), nullable=False),
    sa.Column('followup_priority', sa.String(length=20), nullable=True),
    sa.Column('followup_notes', sa.Text(), nullable=True),
    sa.Column('next_inspection_date', sa.DateTime(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('settings', sa.JSON(), nullable=True),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['checklist_template_id'], ['checklist_templates.id'], ),
    sa.ForeignKeyConstraint(['gate_id'], ['gates.id'], ),
    sa.ForeignKeyConstraint(['inspector_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_inspection_date', 'inspections', ['inspection_date'], unique=False)
    op.create_index('idx_inspection_followup', 'inspections', ['requires_followup'], unique=False)
    op.create_index('idx_inspection_gate', 'inspections', ['gate_id'], unique=False)
    op.create_index('idx_inspection_inspector', 'inspections', ['inspector_id'], unique=False)
    op.create_index('idx_inspection_next_date', 'inspections', ['next_inspection_date'], unique=False)
    op.create_index('idx_inspection_status', 'inspections', ['overall_status'], unique=False)
    op.create_index('idx_inspection_template', 'inspections', ['checklist_template_id'], unique=False)
    op.create_index('idx_inspection_type', 'inspections', ['inspection_type'], unique=False)
    op.create_index(op.f('ix_inspections_checklist_template_id'), 'inspections', ['checklist_template_id'], unique=False)
    op.create_index(op.f('ix_inspections_gate_id'), 'inspections', ['gate_id'], unique=False)
    op.create_index(op.f('ix_inspections_id'), 'inspections', ['id'], unique=False)
    op.create_index(op.f('ix_inspections_inspection_date'), 'inspections', ['inspection_date'], unique=False)
    op.create_index(op.f('ix_inspections_inspector_id'), 'inspections', ['inspector_id'], unique=False)
    op.create_index(op.f('ix_inspections_org_id'), 'inspections', ['org_id'], unique=False)
    op.create_table('maintenance_jobs',
    sa.Column('gate_id', sa.Integer(), nullable=False),
    sa.Column('maintenance_plan_id', sa.Integer(), nullable=True),
    sa.Column('job_number', sa.String(length=50), nullable=False),
    sa.Column('title', sa.String(length=300), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('job_type', sa.String(length=50), nullable=False),
    sa.Column('scheduled_date', sa.DateTime(), nullable=False),
    sa.Column('due_date', sa.DateTime(), nullable=True),
    sa.Column('earliest_start_date', sa.DateTime(), nullable=True),
    sa.Column('latest_completion_date', sa.DateTime(), nullable=True),
    sa.Column('assigned_technician_id', sa.Integer(), nullable=True),
    sa.Column('assigned_team_id', sa.Integer(), nullable=True),
    sa.Column('estimated_duration_hours', sa.Numeric(precision=5, scale=2), nullable=True),
    sa.Column('required_skills', sa.JSON(), nullable=True),
    sa.Column('status', sa.String(length=50), nullable=False),
    sa.Column('progress_percentage', sa.Integer(), nullable=False),
    sa.Column('started_at', sa.DateTime(), nullable=True),
    sa.Column('completed_at', sa.DateTime(), nullable=True),
    sa.Column('actual_duration_hours', sa.Numeric(precision=5, scale=2), nullable=True),
    sa.Column('completion_notes', sa.Text(), nullable=True),
    sa.Column('issues_found', sa.Text(), nullable=True),
    sa.Column('recommendations', sa.Text(), nullable=True),
    sa.Column('followup_required', sa.Boolean(), nullable=False),
    sa.Column('next_maintenance_date', sa.DateTime(), nullable=True),
    sa.Column('estimated_cost', sa.Numeric(precision=10, scale=2), nullable=True),
    sa.Column('actual_labor_cost', sa.Numeric(precision=10, scale=2), nullable=True),
    sa.Column('actual_parts_cost', sa.Numeric(precision=10, scale=2), nullable=True),
    sa.Column('actual_total_cost', sa.Numeric(precision=10, scale=2), nullable=True),
    sa.Column('quality_rating', sa.Integer(), nullable=True),
    sa.Column('safety_incidents', sa.Text(), nullable=True),
    sa.Column('customer_satisfaction', sa.Integer(), nullable=True),
    sa.Column('priority', sa.String(length=20), nullable=False),
    sa.Column('urgency', sa.String(length=20), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('settings', sa.JSON(), nullable=True),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['assigned_technician_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['gate_id'], ['gates.id'], ),
    sa.ForeignKeyConstraint(['maintenance_plan_id'], ['maintenance_plans.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_maintenance_job_assigned', 'maintenance_jobs', ['assigned_technician_id'], unique=False)
    op.create_index('idx_maintenance_job_due', 'maintenance_jobs', ['due_date'], unique=False)
    op.create_index('idx_maintenance_job_gate', 'maintenance_jobs', ['gate_id'], unique=False)
    op.create_index('idx_maintenance_job_number', 'maintenance_jobs', ['job_number'], unique=False)
    op.create_index('idx_maintenance_job_plan', 'maintenance_jobs', ['maintenance_plan_id'], unique=False)
    op.create_index('idx_maintenance_job_priority', 'maintenance_jobs', ['priority'], unique=False)
    op.create_index('idx_maintenance_job_scheduled', 'maintenance_jobs', ['scheduled_date'], unique=False)
    op.create_index('idx_maintenance_job_status', 'maintenance_jobs', ['status'], unique=False)
    op.create_index('idx_maintenance_job_type', 'maintenance_jobs', ['job_type'], unique=False)
    op.create_index('idx_maintenance_job_urgency', 'maintenance_jobs', ['urgency'], unique=False)
    op.create_index(op.f('ix_maintenance_jobs_assigned_technician_id'), 'maintenance_jobs', ['assigned_technician_id'], unique=False)
    op.create_index(op.f('ix_maintenance_jobs_due_date'), 'maintenance_jobs', ['due_date'], unique=False)
    op.create_index(op.f('ix_maintenance_jobs_gate_id'), 'maintenance_jobs', ['gate_id'], unique=False)
    op.create_index(op.f('ix_maintenance_jobs_id'), 'maintenance_jobs', ['id'], unique=False)
    op.create_index(op.f('ix_maintenance_jobs_job_number'), 'maintenance_jobs', ['job_number'], unique=True)
    op.create_index(op.f('ix_maintenance_jobs_job_type'), 'maintenance_jobs', ['job_type'], unique=False)
    op.create_index(op.f('ix_maintenance_jobs_maintenance_plan_id'), 'maintenance_jobs', ['maintenance_plan_id'], unique=False)
    op.create_index(op.f('ix_maintenance_jobs_org_id'), 'maintenance_jobs', ['org_id'], unique=False)
    op.create_index(op.f('ix_maintenance_jobs_scheduled_date'), 'maintenance_jobs', ['scheduled_date'], unique=False)
    op.create_index(op.f('ix_maintenance_jobs_status'), 'maintenance_jobs', ['status'], unique=False)
    op.create_table('tickets',
    sa.Column('gate_id', sa.Integer(), nullable=False),
    sa.Column('reporter_id', sa.Integer(), nullable=True),
    sa.Column('assigned_technician_id', sa.Integer(), nullable=True),
    sa.Column('ticket_number', sa.String(length=50), nullable=False),
    sa.Column('title', sa.String(length=300), nullable=False),
    sa.Column('description', sa.Text(), nullable=False),
    sa.Column('category', sa.String(length=100), nullable=False),
    sa.Column('subcategory', sa.String(length=100), nullable=True),
    sa.Column('issue_type', sa.String(length=100), nullable=False),
    sa.Column('symptoms', sa.Text(), nullable=True),
    sa.Column('error_codes', sa.JSON(), nullable=True),
    sa.Column('affected_components', sa.JSON(), nullable=True),
    sa.Column('reported_at', sa.DateTime(), nullable=False),
    sa.Column('occurred_at', sa.DateTime(), nullable=True),
    sa.Column('first_noticed_at', sa.DateTime(), nullable=True),
    sa.Column('weather_conditions', sa.String(length=200), nullable=True),
    sa.Column('usage_context', sa.Text(), nullable=True),
    sa.Column('priority', sa.String(length=20), nullable=False),
    sa.Column('urgency', sa.String(length=20), nullable=False),
    sa.Column('severity', sa.String(length=20), nullable=False),
    sa.Column('impact', sa.String(length=20), nullable=False),
    sa.Column('safety_hazard', sa.Boolean(), nullable=False),
    sa.Column('safety_description', sa.Text(), nullable=True),
    sa.Column('immediate_danger', sa.Boolean(), nullable=False),
    sa.Column('status', sa.String(length=50), nullable=False),
    sa.Column('resolution_status', sa.String(length=50), nullable=True),
    sa.Column('acknowledged_at', sa.DateTime(), nullable=True),
    sa.Column('assigned_at', sa.DateTime(), nullable=True),
    sa.Column('started_at', sa.DateTime(), nullable=True),
    sa.Column('resolved_at', sa.DateTime(), nullable=True),
    sa.Column('closed_at', sa.DateTime(), nullable=True),
    sa.Column('sla_response_by', sa.DateTime(), nullable=True),
    sa.Column('sla_resolution_by', sa.DateTime(), nullable=True),
    sa.Column('sla_met', sa.Boolean(), nullable=True),
    sa.Column('contact_method', sa.String(length=50), nullable=True),
    sa.Column('contact_phone', sa.String(length=50), nullable=True),
    sa.Column('contact_email', sa.String(length=320), nullable=True),
    sa.Column('resolution_description', sa.Text(), nullable=True),
    sa.Column('root_cause', sa.Text(), nullable=True),
    sa.Column('preventive_actions', sa.Text(), nullable=True),
    sa.Column('followup_required', sa.Boolean(), nullable=False),
    sa.Column('followup_date', sa.DateTime(), nullable=True),
    sa.Column('customer_satisfaction', sa.Integer(), nullable=True),
    sa.Column('estimated_cost', sa.Numeric(precision=10, scale=2), nullable=True),
    sa.Column('actual_cost', sa.Numeric(precision=10, scale=2), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('settings', sa.JSON(), nullable=True),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['assigned_technician_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['gate_id'], ['gates.id'], ),
    sa.ForeignKeyConstraint(['reporter_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_ticket_assigned', 'tickets', ['assigned_technician_id'], unique=False)
    op.create_index('idx_ticket_category', 'tickets', ['category'], unique=False)
    op.create_index('idx_ticket_gate', 'tickets', ['gate_id'], unique=False)
    op.create_index('idx_ticket_issue_type', 'tickets', ['issue_type'], unique=False)
    op.create_index('idx_ticket_number', 'tickets', ['ticket_number'], unique=False)
    op.create_index('idx_ticket_priority', 'tickets', ['priority'], unique=False)
    op.create_index('idx_ticket_reported_date', 'tickets', ['reported_at'], unique=False)
    op.create_index('idx_ticket_reporter', 'tickets', ['reporter_id'], unique=False)
    op.create_index('idx_ticket_safety', 'tickets', ['safety_hazard'], unique=False)
    op.create_index('idx_ticket_sla_resolution', 'tickets', ['sla_resolution_by'], unique=False)
    op.create_index('idx_ticket_sla_response', 'tickets', ['sla_response_by'], unique=False)
    op.create_index('idx_ticket_status', 'tickets', ['status'], unique=False)
    op.create_index(op.f('ix_tickets_assigned_technician_id'), 'tickets', ['assigned_technician_id'], unique=False)
    op.create_index(op.f('ix_tickets_category'), 'tickets', ['category'], unique=False)
    op.create_index(op.f('ix_tickets_gate_id'), 'tickets', ['gate_id'], unique=False)
    op.create_index(op.f('ix_tickets_id'), 'tickets', ['id'], unique=False)
    op.create_index(op.f('ix_tickets_issue_type'), 'tickets', ['issue_type'], unique=False)
    op.create_index(op.f('ix_tickets_org_id'), 'tickets', ['org_id'], unique=False)
    op.create_index(op.f('ix_tickets_priority'), 'tickets', ['priority'], unique=False)
    op.create_index(op.f('ix_tickets_reported_at'), 'tickets', ['reported_at'], unique=False)
    op.create_index(op.f('ix_tickets_reporter_id'), 'tickets', ['reporter_id'], unique=False)
    op.create_index(op.f('ix_tickets_status'), 'tickets', ['status'], unique=False)
    op.create_index(op.f('ix_tickets_subcategory'), 'tickets', ['subcategory'], unique=False)
    op.create_index(op.f('ix_tickets_ticket_number'), 'tickets', ['ticket_number'], unique=True)
    op.create_table('inspection_items',
    sa.Column('inspection_id', sa.Integer(), nullable=False),
    sa.Column('checklist_item_id', sa.Integer(), nullable=False),
    sa.Column('result', sa.String(length=20), nullable=False),
    sa.Column('value', sa.String(length=500), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('checked_at', sa.DateTime(), nullable=False),
    sa.Column('checker_name', sa.String(length=200), nullable=True),
    sa.Column('photo_path', sa.String(length=500), nullable=True),
    sa.Column('document_ids', sa.JSON(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('settings', sa.JSON(), nullable=True),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['checklist_item_id'], ['checklist_items.id'], ),
    sa.ForeignKeyConstraint(['inspection_id'], ['inspections.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_inspection_item_checklist', 'inspection_items', ['checklist_item_id'], unique=False)
    op.create_index('idx_inspection_item_date', 'inspection_items', ['checked_at'], unique=False)
    op.create_index('idx_inspection_item_inspection', 'inspection_items', ['inspection_id'], unique=False)
    op.create_index('idx_inspection_item_result', 'inspection_items', ['result'], unique=False)
    op.create_index(op.f('ix_inspection_items_checklist_item_id'), 'inspection_items', ['checklist_item_id'], unique=False)
    op.create_index(op.f('ix_inspection_items_id'), 'inspection_items', ['id'], unique=False)
    op.create_index(op.f('ix_inspection_items_inspection_id'), 'inspection_items', ['inspection_id'], unique=False)
    op.create_index(op.f('ix_inspection_items_org_id'), 'inspection_items', ['org_id'], unique=False)
    op.create_table('measurements',
    sa.Column('inspection_id', sa.Integer(), nullable=False),
    sa.Column('gate_id', sa.Integer(), nullable=False),
    sa.Column('component_id', sa.Integer(), nullable=True),
    sa.Column('measurement_type', sa.String(length=100), nullable=False),
    sa.Column('measurement_name', sa.String(length=200), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('value', sa.Numeric(precision=15, scale=6), nullable=False),
    sa.Column('unit', sa.String(length=20), nullable=False),
    sa.Column('target_value', sa.Numeric(precision=15, scale=6), nullable=True),
    sa.Column('min_acceptable', sa.Numeric(precision=15, scale=6), nullable=True),
    sa.Column('max_acceptable', sa.Numeric(precision=15, scale=6), nullable=True),
    sa.Column('measurement_conditions', sa.Text(), nullable=True),
    sa.Column('equipment_used', sa.String(length=200), nullable=True),
    sa.Column('calibration_date', sa.DateTime(), nullable=True),
    sa.Column('is_within_tolerance', sa.Boolean(), nullable=True),
    sa.Column('deviation_percentage', sa.Numeric(precision=10, scale=3), nullable=True),
    sa.Column('status', sa.String(length=50), nullable=False),
    sa.Column('measured_at', sa.DateTime(), nullable=False),
    sa.Column('measured_by', sa.String(length=200), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('settings', sa.JSON(), nullable=True),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['component_id'], ['gate_components.id'], ),
    sa.ForeignKeyConstraint(['gate_id'], ['gates.id'], ),
    sa.ForeignKeyConstraint(['inspection_id'], ['inspections.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_measurement_component', 'measurements', ['component_id'], unique=False)
    op.create_index('idx_measurement_date', 'measurements', ['measured_at'], unique=False)
    op.create_index('idx_measurement_gate', 'measurements', ['gate_id'], unique=False)
    op.create_index('idx_measurement_inspection', 'measurements', ['inspection_id'], unique=False)
    op.create_index('idx_measurement_status', 'measurements', ['status'], unique=False)
    op.create_index('idx_measurement_type', 'measurements', ['measurement_type'], unique=False)
    op.create_index(op.f('ix_measurements_component_id'), 'measurements', ['component_id'], unique=False)
    op.create_index(op.f('ix_measurements_gate_id'), 'measurements', ['gate_id'], unique=False)
    op.create_index(op.f('ix_measurements_id'), 'measurements', ['id'], unique=False)
    op.create_index(op.f('ix_measurements_inspection_id'), 'measurements', ['inspection_id'], unique=False)
    op.create_index(op.f('ix_measurements_measured_at'), 'measurements', ['measured_at'], unique=False)
    op.create_index(op.f('ix_measurements_measurement_type'), 'measurements', ['measurement_type'], unique=False)
    op.create_index(op.f('ix_measurements_org_id'), 'measurements', ['org_id'], unique=False)
    op.create_table('reminders',
    sa.Column('gate_id', sa.Integer(), nullable=True),
    sa.Column('maintenance_job_id', sa.Integer(), nullable=True),
    sa.Column('user_id', sa.Integer(), nullable=True),
    sa.Column('title', sa.String(length=300), nullable=False),
    sa.Column('message', sa.Text(), nullable=False),
    sa.Column('reminder_type', sa.String(length=50), nullable=False),
    sa.Column('scheduled_for', sa.DateTime(), nullable=False),
    sa.Column('repeat_interval_days', sa.Integer(), nullable=True),
    sa.Column('repeat_count', sa.Integer(), nullable=False),
    sa.Column('times_sent', sa.Integer(), nullable=False),
    sa.Column('send_email', sa.Boolean(), nullable=False),
    sa.Column('send_sms', sa.Boolean(), nullable=False),
    sa.Column('send_push', sa.Boolean(), nullable=False),
    sa.Column('send_in_app', sa.Boolean(), nullable=False),
    sa.Column('recipient_emails', sa.JSON(), nullable=True),
    sa.Column('recipient_phones', sa.JSON(), nullable=True),
    sa.Column('status', sa.String(length=50), nullable=False),
    sa.Column('last_sent_at', sa.DateTime(), nullable=True),
    sa.Column('delivered_at', sa.DateTime(), nullable=True),
    sa.Column('acknowledged_at', sa.DateTime(), nullable=True),
    sa.Column('acknowledged_by', sa.String(length=200), nullable=True),
    sa.Column('priority', sa.String(length=20), nullable=False),
    sa.Column('urgency', sa.String(length=20), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('settings', sa.JSON(), nullable=True),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['gate_id'], ['gates.id'], ),
    sa.ForeignKeyConstraint(['maintenance_job_id'], ['maintenance_jobs.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_reminder_gate', 'reminders', ['gate_id'], unique=False)
    op.create_index('idx_reminder_job', 'reminders', ['maintenance_job_id'], unique=False)
    op.create_index('idx_reminder_priority', 'reminders', ['priority'], unique=False)
    op.create_index('idx_reminder_scheduled', 'reminders', ['scheduled_for'], unique=False)
    op.create_index('idx_reminder_status', 'reminders', ['status'], unique=False)
    op.create_index('idx_reminder_type', 'reminders', ['reminder_type'], unique=False)
    op.create_index('idx_reminder_user', 'reminders', ['user_id'], unique=False)
    op.create_index(op.f('ix_reminders_gate_id'), 'reminders', ['gate_id'], unique=False)
    op.create_index(op.f('ix_reminders_id'), 'reminders', ['id'], unique=False)
    op.create_index(op.f('ix_reminders_maintenance_job_id'), 'reminders', ['maintenance_job_id'], unique=False)
    op.create_index(op.f('ix_reminders_org_id'), 'reminders', ['org_id'], unique=False)
    op.create_index(op.f('ix_reminders_reminder_type'), 'reminders', ['reminder_type'], unique=False)
    op.create_index(op.f('ix_reminders_scheduled_for'), 'reminders', ['scheduled_for'], unique=False)
    op.create_index(op.f('ix_reminders_status'), 'reminders', ['status'], unique=False)
    op.create_index(op.f('ix_reminders_user_id'), 'reminders', ['user_id'], unique=False)
    op.create_table('work_orders',
    sa.Column('gate_id', sa.Integer(), nullable=False),
    sa.Column('ticket_id', sa.Integer(), nullable=True),
    sa.Column('maintenance_job_id', sa.Integer(), nullable=True),
    sa.Column('assigned_technician_id', sa.Integer(), nullable=True),
    sa.Column('work_order_number', sa.String(length=50), nullable=False),
    sa.Column('title', sa.String(length=300), nullable=False),
    sa.Column('description', sa.Text(), nullable=False),
    sa.Column('work_type', sa.String(length=50), nullable=False),
    sa.Column('work_category', sa.String(length=100), nullable=False),
    sa.Column('instructions', sa.Text(), nullable=True),
    sa.Column('safety_requirements', sa.Text(), nullable=True),
    sa.Column('scheduled_start', sa.DateTime(), nullable=True),
    sa.Column('scheduled_end', sa.DateTime(), nullable=True),
    sa.Column('estimated_duration_hours', sa.Numeric(precision=5, scale=2), nullable=True),
    sa.Column('actual_start', sa.DateTime(), nullable=True),
    sa.Column('actual_end', sa.DateTime(), nullable=True),
    sa.Column('actual_duration_hours', sa.Numeric(precision=5, scale=2), nullable=True),
    sa.Column('status', sa.String(length=50), nullable=False),
    sa.Column('progress_percentage', sa.Integer(), nullable=False),
    sa.Column('priority', sa.String(length=20), nullable=False),
    sa.Column('urgency', sa.String(length=20), nullable=False),
    sa.Column('required_skills', sa.JSON(), nullable=True),
    sa.Column('required_tools', sa.JSON(), nullable=True),
    sa.Column('required_parts', sa.JSON(), nullable=True),
    sa.Column('work_performed', sa.Text(), nullable=True),
    sa.Column('issues_encountered', sa.Text(), nullable=True),
    sa.Column('parts_used', sa.JSON(), nullable=True),
    sa.Column('tools_used', sa.JSON(), nullable=True),
    sa.Column('quality_check_passed', sa.Boolean(), nullable=True),
    sa.Column('quality_notes', sa.Text(), nullable=True),
    sa.Column('customer_approval', sa.Boolean(), nullable=True),
    sa.Column('customer_signature', sa.String(length=500), nullable=True),
    sa.Column('estimated_labor_cost', sa.Numeric(precision=10, scale=2), nullable=True),
    sa.Column('estimated_parts_cost', sa.Numeric(precision=10, scale=2), nullable=True),
    sa.Column('actual_labor_cost', sa.Numeric(precision=10, scale=2), nullable=True),
    sa.Column('actual_parts_cost', sa.Numeric(precision=10, scale=2), nullable=True),
    sa.Column('total_cost', sa.Numeric(precision=10, scale=2), nullable=True),
    sa.Column('followup_required', sa.Boolean(), nullable=False),
    sa.Column('next_maintenance_date', sa.DateTime(), nullable=True),
    sa.Column('warranty_period_months', sa.Integer(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('settings', sa.JSON(), nullable=True),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['assigned_technician_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['gate_id'], ['gates.id'], ),
    sa.ForeignKeyConstraint(['maintenance_job_id'], ['maintenance_jobs.id'], ),
    sa.ForeignKeyConstraint(['ticket_id'], ['tickets.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_work_order_assigned', 'work_orders', ['assigned_technician_id'], unique=False)
    op.create_index('idx_work_order_gate', 'work_orders', ['gate_id'], unique=False)
    op.create_index('idx_work_order_maintenance', 'work_orders', ['maintenance_job_id'], unique=False)
    op.create_index('idx_work_order_number', 'work_orders', ['work_order_number'], unique=False)
    op.create_index('idx_work_order_priority', 'work_orders', ['priority'], unique=False)
    op.create_index('idx_work_order_scheduled', 'work_orders', ['scheduled_start'], unique=False)
    op.create_index('idx_work_order_status', 'work_orders', ['status'], unique=False)
    op.create_index('idx_work_order_ticket', 'work_orders', ['ticket_id'], unique=False)
    op.create_index('idx_work_order_type', 'work_orders', ['work_type'], unique=False)
    op.create_index(op.f('ix_work_orders_assigned_technician_id'), 'work_orders', ['assigned_technician_id'], unique=False)
    op.create_index(op.f('ix_work_orders_gate_id'), 'work_orders', ['gate_id'], unique=False)
    op.create_index(op.f('ix_work_orders_id'), 'work_orders', ['id'], unique=False)
    op.create_index(op.f('ix_work_orders_maintenance_job_id'), 'work_orders', ['maintenance_job_id'], unique=False)
    op.create_index(op.f('ix_work_orders_org_id'), 'work_orders', ['org_id'], unique=False)
    op.create_index(op.f('ix_work_orders_scheduled_start'), 'work_orders', ['scheduled_start'], unique=False)
    op.create_index(op.f('ix_work_orders_status'), 'work_orders', ['status'], unique=False)
    op.create_index(op.f('ix_work_orders_ticket_id'), 'work_orders', ['ticket_id'], unique=False)
    op.create_index(op.f('ix_work_orders_work_category'), 'work_orders', ['work_category'], unique=False)
    op.create_index(op.f('ix_work_orders_work_order_number'), 'work_orders', ['work_order_number'], unique=True)
    op.create_index(op.f('ix_work_orders_work_type'), 'work_orders', ['work_type'], unique=False)
    op.create_table('part_usages',
    sa.Column('work_order_id', sa.Integer(), nullable=False),
    sa.Column('part_id', sa.Integer(), nullable=False),
    sa.Column('gate_id', sa.Integer(), nullable=False),
    sa.Column('component_id', sa.Integer(), nullable=True),
    sa.Column('quantity_used', sa.Numeric(precision=10, scale=3), nullable=False),
    sa.Column('unit_cost', sa.Numeric(precision=10, scale=2), nullable=True),
    sa.Column('total_cost', sa.Numeric(precision=10, scale=2), nullable=True),
    sa.Column('usage_date', sa.DateTime(), nullable=False),
    sa.Column('used_by', sa.String(length=200), nullable=True),
    sa.Column('usage_reason', sa.String(length=200), nullable=True),
    sa.Column('installation_location', sa.String(length=200), nullable=True),
    sa.Column('installation_notes', sa.Text(), nullable=True),
    sa.Column('warranty_start_date', sa.DateTime(), nullable=True),
    sa.Column('warranty_end_date', sa.DateTime(), nullable=True),
    sa.Column('warranty_terms', sa.Text(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('settings', sa.JSON(), nullable=True),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['component_id'], ['gate_components.id'], ),
    sa.ForeignKeyConstraint(['gate_id'], ['gates.id'], ),
    sa.ForeignKeyConstraint(['part_id'], ['parts.id'], ),
    sa.ForeignKeyConstraint(['work_order_id'], ['work_orders.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_part_usage_component', 'part_usages', ['component_id'], unique=False)
    op.create_index('idx_part_usage_date', 'part_usages', ['usage_date'], unique=False)
    op.create_index('idx_part_usage_gate', 'part_usages', ['gate_id'], unique=False)
    op.create_index('idx_part_usage_part', 'part_usages', ['part_id'], unique=False)
    op.create_index('idx_part_usage_reason', 'part_usages', ['usage_reason'], unique=False)
    op.create_index('idx_part_usage_work_order', 'part_usages', ['work_order_id'], unique=False)
    op.create_index(op.f('ix_part_usages_component_id'), 'part_usages', ['component_id'], unique=False)
    op.create_index(op.f('ix_part_usages_gate_id'), 'part_usages', ['gate_id'], unique=False)
    op.create_index(op.f('ix_part_usages_id'), 'part_usages', ['id'], unique=False)
    op.create_index(op.f('ix_part_usages_org_id'), 'part_usages', ['org_id'], unique=False)
    op.create_index(op.f('ix_part_usages_part_id'), 'part_usages', ['part_id'], unique=False)
    op.create_index(op.f('ix_part_usages_usage_date'), 'part_usages', ['usage_date'], unique=False)
    op.create_index(op.f('ix_part_usages_work_order_id'), 'part_usages', ['work_order_id'], unique=False)
    op.create_table('work_order_items',
    sa.Column('work_order_id', sa.Integer(), nullable=False),
    sa.Column('title', sa.String(length=300), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('instructions', sa.Text(), nullable=True),
    sa.Column('order_index', sa.Integer(), nullable=False),
    sa.Column('estimated_duration_minutes', sa.Integer(), nullable=True),
    sa.Column('actual_duration_minutes', sa.Integer(), nullable=True),
    sa.Column('started_at', sa.DateTime(), nullable=True),
    sa.Column('completed_at', sa.DateTime(), nullable=True),
    sa.Column('status', sa.String(length=50), nullable=False),
    sa.Column('result', sa.String(length=50), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('requires_verification', sa.Boolean(), nullable=False),
    sa.Column('verified', sa.Boolean(), nullable=True),
    sa.Column('verified_by', sa.String(length=200), nullable=True),
    sa.Column('verified_at', sa.DateTime(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('settings', sa.JSON(), nullable=True),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['work_order_id'], ['work_orders.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_work_order_item_order', 'work_order_items', ['order_index'], unique=False)
    op.create_index('idx_work_order_item_status', 'work_order_items', ['status'], unique=False)
    op.create_index('idx_work_order_item_wo', 'work_order_items', ['work_order_id'], unique=False)
    op.create_index(op.f('ix_work_order_items_id'), 'work_order_items', ['id'], unique=False)
    op.create_index(op.f('ix_work_order_items_org_id'), 'work_order_items', ['org_id'], unique=False)
    op.create_index(op.f('ix_work_order_items_work_order_id'), 'work_order_items', ['work_order_id'], unique=False)
    # ### end Alembic commands ###


def downgrade() -> None:
    """Downgrade schema."""
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_index(op.f('ix_work_order_items_work_order_id'), table_name='work_order_items')
    op.drop_index(op.f('ix_work_order_items_org_id'), table_name='work_order_items')
    op.drop_index(op.f('ix_work_order_items_id'), table_name='work_order_items')
    op.drop_index('idx_work_order_item_wo', table_name='work_order_items')
    op.drop_index('idx_work_order_item_status', table_name='work_order_items')
    op.drop_index('idx_work_order_item_order', table_name='work_order_items')
    op.drop_table('work_order_items')
    op.drop_index(op.f('ix_part_usages_work_order_id'), table_name='part_usages')
    op.drop_index(op.f('ix_part_usages_usage_date'), table_name='part_usages')
    op.drop_index(op.f('ix_part_usages_part_id'), table_name='part_usages')
    op.drop_index(op.f('ix_part_usages_org_id'), table_name='part_usages')
    op.drop_index(op.f('ix_part_usages_id'), table_name='part_usages')
    op.drop_index(op.f('ix_part_usages_gate_id'), table_name='part_usages')
    op.drop_index(op.f('ix_part_usages_component_id'), table_name='part_usages')
    op.drop_index('idx_part_usage_work_order', table_name='part_usages')
    op.drop_index('idx_part_usage_reason', table_name='part_usages')
    op.drop_index('idx_part_usage_part', table_name='part_usages')
    op.drop_index('idx_part_usage_gate', table_name='part_usages')
    op.drop_index('idx_part_usage_date', table_name='part_usages')
    op.drop_index('idx_part_usage_component', table_name='part_usages')
    op.drop_table('part_usages')
    op.drop_index(op.f('ix_work_orders_work_type'), table_name='work_orders')
    op.drop_index(op.f('ix_work_orders_work_order_number'), table_name='work_orders')
    op.drop_index(op.f('ix_work_orders_work_category'), table_name='work_orders')
    op.drop_index(op.f('ix_work_orders_ticket_id'), table_name='work_orders')
    op.drop_index(op.f('ix_work_orders_status'), table_name='work_orders')
    op.drop_index(op.f('ix_work_orders_scheduled_start'), table_name='work_orders')
    op.drop_index(op.f('ix_work_orders_org_id'), table_name='work_orders')
    op.drop_index(op.f('ix_work_orders_maintenance_job_id'), table_name='work_orders')
    op.drop_index(op.f('ix_work_orders_id'), table_name='work_orders')
    op.drop_index(op.f('ix_work_orders_gate_id'), table_name='work_orders')
    op.drop_index(op.f('ix_work_orders_assigned_technician_id'), table_name='work_orders')
    op.drop_index('idx_work_order_type', table_name='work_orders')
    op.drop_index('idx_work_order_ticket', table_name='work_orders')
    op.drop_index('idx_work_order_status', table_name='work_orders')
    op.drop_index('idx_work_order_scheduled', table_name='work_orders')
    op.drop_index('idx_work_order_priority', table_name='work_orders')
    op.drop_index('idx_work_order_number', table_name='work_orders')
    op.drop_index('idx_work_order_maintenance', table_name='work_orders')
    op.drop_index('idx_work_order_gate', table_name='work_orders')
    op.drop_index('idx_work_order_assigned', table_name='work_orders')
    op.drop_table('work_orders')
    op.drop_index(op.f('ix_reminders_user_id'), table_name='reminders')
    op.drop_index(op.f('ix_reminders_status'), table_name='reminders')
    op.drop_index(op.f('ix_reminders_scheduled_for'), table_name='reminders')
    op.drop_index(op.f('ix_reminders_reminder_type'), table_name='reminders')
    op.drop_index(op.f('ix_reminders_org_id'), table_name='reminders')
    op.drop_index(op.f('ix_reminders_maintenance_job_id'), table_name='reminders')
    op.drop_index(op.f('ix_reminders_id'), table_name='reminders')
    op.drop_index(op.f('ix_reminders_gate_id'), table_name='reminders')
    op.drop_index('idx_reminder_user', table_name='reminders')
    op.drop_index('idx_reminder_type', table_name='reminders')
    op.drop_index('idx_reminder_status', table_name='reminders')
    op.drop_index('idx_reminder_scheduled', table_name='reminders')
    op.drop_index('idx_reminder_priority', table_name='reminders')
    op.drop_index('idx_reminder_job', table_name='reminders')
    op.drop_index('idx_reminder_gate', table_name='reminders')
    op.drop_table('reminders')
    op.drop_index(op.f('ix_measurements_org_id'), table_name='measurements')
    op.drop_index(op.f('ix_measurements_measurement_type'), table_name='measurements')
    op.drop_index(op.f('ix_measurements_measured_at'), table_name='measurements')
    op.drop_index(op.f('ix_measurements_inspection_id'), table_name='measurements')
    op.drop_index(op.f('ix_measurements_id'), table_name='measurements')
    op.drop_index(op.f('ix_measurements_gate_id'), table_name='measurements')
    op.drop_index(op.f('ix_measurements_component_id'), table_name='measurements')
    op.drop_index('idx_measurement_type', table_name='measurements')
    op.drop_index('idx_measurement_status', table_name='measurements')
    op.drop_index('idx_measurement_inspection', table_name='measurements')
    op.drop_index('idx_measurement_gate', table_name='measurements')
    op.drop_index('idx_measurement_date', table_name='measurements')
    op.drop_index('idx_measurement_component', table_name='measurements')
    op.drop_table('measurements')
    op.drop_index(op.f('ix_inspection_items_org_id'), table_name='inspection_items')
    op.drop_index(op.f('ix_inspection_items_inspection_id'), table_name='inspection_items')
    op.drop_index(op.f('ix_inspection_items_id'), table_name='inspection_items')
    op.drop_index(op.f('ix_inspection_items_checklist_item_id'), table_name='inspection_items')
    op.drop_index('idx_inspection_item_result', table_name='inspection_items')
    op.drop_index('idx_inspection_item_inspection', table_name='inspection_items')
    op.drop_index('idx_inspection_item_date', table_name='inspection_items')
    op.drop_index('idx_inspection_item_checklist', table_name='inspection_items')
    op.drop_table('inspection_items')
    op.drop_index(op.f('ix_tickets_ticket_number'), table_name='tickets')
    op.drop_index(op.f('ix_tickets_subcategory'), table_name='tickets')
    op.drop_index(op.f('ix_tickets_status'), table_name='tickets')
    op.drop_index(op.f('ix_tickets_reporter_id'), table_name='tickets')
    op.drop_index(op.f('ix_tickets_reported_at'), table_name='tickets')
    op.drop_index(op.f('ix_tickets_priority'), table_name='tickets')
    op.drop_index(op.f('ix_tickets_org_id'), table_name='tickets')
    op.drop_index(op.f('ix_tickets_issue_type'), table_name='tickets')
    op.drop_index(op.f('ix_tickets_id'), table_name='tickets')
    op.drop_index(op.f('ix_tickets_gate_id'), table_name='tickets')
    op.drop_index(op.f('ix_tickets_category'), table_name='tickets')
    op.drop_index(op.f('ix_tickets_assigned_technician_id'), table_name='tickets')
    op.drop_index('idx_ticket_status', table_name='tickets')
    op.drop_index('idx_ticket_sla_response', table_name='tickets')
    op.drop_index('idx_ticket_sla_resolution', table_name='tickets')
    op.drop_index('idx_ticket_safety', table_name='tickets')
    op.drop_index('idx_ticket_reporter', table_name='tickets')
    op.drop_index('idx_ticket_reported_date', table_name='tickets')
    op.drop_index('idx_ticket_priority', table_name='tickets')
    op.drop_index('idx_ticket_number', table_name='tickets')
    op.drop_index('idx_ticket_issue_type', table_name='tickets')
    op.drop_index('idx_ticket_gate', table_name='tickets')
    op.drop_index('idx_ticket_category', table_name='tickets')
    op.drop_index('idx_ticket_assigned', table_name='tickets')
    op.drop_table('tickets')
    op.drop_index(op.f('ix_maintenance_jobs_status'), table_name='maintenance_jobs')
    op.drop_index(op.f('ix_maintenance_jobs_scheduled_date'), table_name='maintenance_jobs')
    op.drop_index(op.f('ix_maintenance_jobs_org_id'), table_name='maintenance_jobs')
    op.drop_index(op.f('ix_maintenance_jobs_maintenance_plan_id'), table_name='maintenance_jobs')
    op.drop_index(op.f('ix_maintenance_jobs_job_type'), table_name='maintenance_jobs')
    op.drop_index(op.f('ix_maintenance_jobs_job_number'), table_name='maintenance_jobs')
    op.drop_index(op.f('ix_maintenance_jobs_id'), table_name='maintenance_jobs')
    op.drop_index(op.f('ix_maintenance_jobs_gate_id'), table_name='maintenance_jobs')
    op.drop_index(op.f('ix_maintenance_jobs_due_date'), table_name='maintenance_jobs')
    op.drop_index(op.f('ix_maintenance_jobs_assigned_technician_id'), table_name='maintenance_jobs')
    op.drop_index('idx_maintenance_job_urgency', table_name='maintenance_jobs')
    op.drop_index('idx_maintenance_job_type', table_name='maintenance_jobs')
    op.drop_index('idx_maintenance_job_status', table_name='maintenance_jobs')
    op.drop_index('idx_maintenance_job_scheduled', table_name='maintenance_jobs')
    op.drop_index('idx_maintenance_job_priority', table_name='maintenance_jobs')
    op.drop_index('idx_maintenance_job_plan', table_name='maintenance_jobs')
    op.drop_index('idx_maintenance_job_number', table_name='maintenance_jobs')
    op.drop_index('idx_maintenance_job_gate', table_name='maintenance_jobs')
    op.drop_index('idx_maintenance_job_due', table_name='maintenance_jobs')
    op.drop_index('idx_maintenance_job_assigned', table_name='maintenance_jobs')
    op.drop_table('maintenance_jobs')
    op.drop_index(op.f('ix_inspections_org_id'), table_name='inspections')
    op.drop_index(op.f('ix_inspections_inspector_id'), table_name='inspections')
    op.drop_index(op.f('ix_inspections_inspection_date'), table_name='inspections')
    op.drop_index(op.f('ix_inspections_id'), table_name='inspections')
    op.drop_index(op.f('ix_inspections_gate_id'), table_name='inspections')
    op.drop_index(op.f('ix_inspections_checklist_template_id'), table_name='inspections')
    op.drop_index('idx_inspection_type', table_name='inspections')
    op.drop_index('idx_inspection_template', table_name='inspections')
    op.drop_index('idx_inspection_status', table_name='inspections')
    op.drop_index('idx_inspection_next_date', table_name='inspections')
    op.drop_index('idx_inspection_inspector', table_name='inspections')
    op.drop_index('idx_inspection_gate', table_name='inspections')
    op.drop_index('idx_inspection_followup', table_name='inspections')
    op.drop_index('idx_inspection_date', table_name='inspections')
    op.drop_table('inspections')
    op.drop_index(op.f('ix_gate_components_serial_number'), table_name='gate_components')
    op.drop_index(op.f('ix_gate_components_part_number'), table_name='gate_components')
    op.drop_index(op.f('ix_gate_components_org_id'), table_name='gate_components')
    op.drop_index(op.f('ix_gate_components_name'), table_name='gate_components')
    op.drop_index(op.f('ix_gate_components_id'), table_name='gate_components')
    op.drop_index(op.f('ix_gate_components_gate_id'), table_name='gate_components')
    op.drop_index(op.f('ix_gate_components_component_type'), table_name='gate_components')
    op.drop_index('idx_component_warranty', table_name='gate_components')
    op.drop_index('idx_component_type', table_name='gate_components')
    op.drop_index('idx_component_status', table_name='gate_components')
    op.drop_index('idx_component_serial', table_name='gate_components')
    op.drop_index('idx_component_replacement', table_name='gate_components')
    op.drop_index('idx_component_part_number', table_name='gate_components')
    op.drop_index('idx_component_name', table_name='gate_components')
    op.drop_index('idx_component_maintenance', table_name='gate_components')
    op.drop_index('idx_component_gate', table_name='gate_components')
    op.drop_index('idx_component_condition', table_name='gate_components')
    op.drop_table('gate_components')
    op.drop_index(op.f('ix_gates_serial_number'), table_name='gates')
    op.drop_index(op.f('ix_gates_org_id'), table_name='gates')
    op.drop_index(op.f('ix_gates_name'), table_name='gates')
    op.drop_index(op.f('ix_gates_id'), table_name='gates')
    op.drop_index(op.f('ix_gates_gate_code'), table_name='gates')
    op.drop_index(op.f('ix_gates_building_id'), table_name='gates')
    op.drop_index('idx_gate_type', table_name='gates')
    op.drop_index('idx_gate_status', table_name='gates')
    op.drop_index('idx_gate_serial', table_name='gates')
    op.drop_index('idx_gate_name', table_name='gates')
    op.drop_index('idx_gate_manufacturer', table_name='gates')
    op.drop_index('idx_gate_maintenance', table_name='gates')
    op.drop_index('idx_gate_code', table_name='gates')
    op.drop_index('idx_gate_building', table_name='gates')
    op.drop_index('idx_gate_active', table_name='gates')
    op.drop_table('gates')
    op.drop_index(op.f('ix_media_objects_org_id'), table_name='media_objects')
    op.drop_index(op.f('ix_media_objects_media_type'), table_name='media_objects')
    op.drop_index(op.f('ix_media_objects_id'), table_name='media_objects')
    op.drop_index(op.f('ix_media_objects_document_id'), table_name='media_objects')
    op.drop_index('idx_media_type', table_name='media_objects')
    op.drop_index('idx_media_taken', table_name='media_objects')
    op.drop_index('idx_media_processing', table_name='media_objects')
    op.drop_index('idx_media_gps', table_name='media_objects')
    op.drop_index('idx_media_document', table_name='media_objects')
    op.drop_table('media_objects')
    op.drop_index(op.f('ix_buildings_site_id'), table_name='buildings')
    op.drop_index(op.f('ix_buildings_org_id'), table_name='buildings')
    op.drop_index(op.f('ix_buildings_name'), table_name='buildings')
    op.drop_index(op.f('ix_buildings_id'), table_name='buildings')
    op.drop_index(op.f('ix_buildings_building_code'), table_name='buildings')
    op.drop_index('idx_building_type', table_name='buildings')
    op.drop_index('idx_building_site', table_name='buildings')
    op.drop_index('idx_building_name', table_name='buildings')
    op.drop_index('idx_building_code', table_name='buildings')
    op.drop_index('idx_building_active', table_name='buildings')
    op.drop_table('buildings')
    op.drop_index(op.f('ix_webauthn_credentials_user_id'), table_name='webauthn_credentials')
    op.drop_index(op.f('ix_webauthn_credentials_org_id'), table_name='webauthn_credentials')
    op.drop_index(op.f('ix_webauthn_credentials_id'), table_name='webauthn_credentials')
    op.drop_index(op.f('ix_webauthn_credentials_credential_id'), table_name='webauthn_credentials')
    op.drop_index('idx_webauthn_user', table_name='webauthn_credentials')
    op.drop_index('idx_webauthn_last_used', table_name='webauthn_credentials')
    op.drop_index('idx_webauthn_credential_id', table_name='webauthn_credentials')
    op.drop_index('idx_webauthn_active', table_name='webauthn_credentials')
    op.drop_table('webauthn_credentials')
    op.drop_index(op.f('ix_totp_secrets_user_id'), table_name='totp_secrets')
    op.drop_index(op.f('ix_totp_secrets_org_id'), table_name='totp_secrets')
    op.drop_index(op.f('ix_totp_secrets_id'), table_name='totp_secrets')
    op.drop_index('idx_totp_verified', table_name='totp_secrets')
    op.drop_index('idx_totp_user', table_name='totp_secrets')
    op.drop_index('idx_totp_active', table_name='totp_secrets')
    op.drop_table('totp_secrets')
    op.drop_index(op.f('ix_stock_movements_warehouse_id'), table_name='stock_movements')
    op.drop_index(op.f('ix_stock_movements_reference_id'), table_name='stock_movements')
    op.drop_index(op.f('ix_stock_movements_processed_by_user_id'), table_name='stock_movements')
    op.drop_index(op.f('ix_stock_movements_part_id'), table_name='stock_movements')
    op.drop_index(op.f('ix_stock_movements_org_id'), table_name='stock_movements')
    op.drop_index(op.f('ix_stock_movements_movement_type'), table_name='stock_movements')
    op.drop_index(op.f('ix_stock_movements_movement_reason'), table_name='stock_movements')
    op.drop_index(op.f('ix_stock_movements_movement_date'), table_name='stock_movements')
    op.drop_index(op.f('ix_stock_movements_inventory_item_id'), table_name='stock_movements')
    op.drop_index(op.f('ix_stock_movements_id'), table_name='stock_movements')
    op.drop_index(op.f('ix_stock_movements_document_number'), table_name='stock_movements')
    op.drop_index('idx_stock_movement_warehouse', table_name='stock_movements')
    op.drop_index('idx_stock_movement_type', table_name='stock_movements')
    op.drop_index('idx_stock_movement_status', table_name='stock_movements')
    op.drop_index('idx_stock_movement_reference', table_name='stock_movements')
    op.drop_index('idx_stock_movement_part', table_name='stock_movements')
    op.drop_index('idx_stock_movement_inventory', table_name='stock_movements')
    op.drop_index('idx_stock_movement_document', table_name='stock_movements')
    op.drop_index('idx_stock_movement_date', table_name='stock_movements')
    op.drop_table('stock_movements')
    op.drop_index(op.f('ix_sites_site_code'), table_name='sites')
    op.drop_index(op.f('ix_sites_org_id'), table_name='sites')
    op.drop_index(op.f('ix_sites_name'), table_name='sites')
    op.drop_index(op.f('ix_sites_id'), table_name='sites')
    op.drop_index(op.f('ix_sites_client_id'), table_name='sites')
    op.drop_index('idx_site_name', table_name='sites')
    op.drop_index('idx_site_location', table_name='sites')
    op.drop_index('idx_site_code', table_name='sites')
    op.drop_index('idx_site_client', table_name='sites')
    op.drop_index('idx_site_active', table_name='sites')
    op.drop_table('sites')
    op.drop_index(op.f('ix_role_assignments_user_id'), table_name='role_assignments')
    op.drop_index(op.f('ix_role_assignments_role_id'), table_name='role_assignments')
    op.drop_index(op.f('ix_role_assignments_org_id'), table_name='role_assignments')
    op.drop_index(op.f('ix_role_assignments_id'), table_name='role_assignments')
    op.drop_index('idx_role_assignment_user', table_name='role_assignments')
    op.drop_index('idx_role_assignment_scope', table_name='role_assignments')
    op.drop_index('idx_role_assignment_role', table_name='role_assignments')
    op.drop_index('idx_role_assignment_expires', table_name='role_assignments')
    op.drop_index('idx_role_assignment_active', table_name='role_assignments')
    op.drop_table('role_assignments')
    op.drop_index(op.f('ix_events_source_user_id'), table_name='events')
    op.drop_index(op.f('ix_events_scheduled_for'), table_name='events')
    op.drop_index(op.f('ix_events_org_id'), table_name='events')
    op.drop_index(op.f('ix_events_occurred_at'), table_name='events')
    op.drop_index(op.f('ix_events_id'), table_name='events')
    op.drop_index(op.f('ix_events_event_type'), table_name='events')
    op.drop_index(op.f('ix_events_entity_type'), table_name='events')
    op.drop_index(op.f('ix_events_entity_id'), table_name='events')
    op.drop_index(op.f('ix_events_category'), table_name='events')
    op.drop_index('idx_event_type', table_name='events')
    op.drop_index('idx_event_source', table_name='events')
    op.drop_index('idx_event_severity', table_name='events')
    op.drop_index('idx_event_scheduled', table_name='events')
    op.drop_index('idx_event_processing', table_name='events')
    op.drop_index('idx_event_priority', table_name='events')
    op.drop_index('idx_event_occurred', table_name='events')
    op.drop_index('idx_event_entity', table_name='events')
    op.drop_index('idx_event_category', table_name='events')
    op.drop_table('events')
    op.drop_index(op.f('ix_documents_uploaded_by'), table_name='documents')
    op.drop_index(op.f('ix_documents_uploaded_at'), table_name='documents')
    op.drop_index(op.f('ix_documents_org_id'), table_name='documents')
    op.drop_index(op.f('ix_documents_id'), table_name='documents')
    op.drop_index(op.f('ix_documents_file_hash'), table_name='documents')
    op.drop_index(op.f('ix_documents_entity_type'), table_name='documents')
    op.drop_index(op.f('ix_documents_entity_id'), table_name='documents')
    op.drop_index(op.f('ix_documents_category'), table_name='documents')
    op.drop_index('idx_document_uploader', table_name='documents')
    op.drop_index('idx_document_uploaded', table_name='documents')
    op.drop_index('idx_document_hash', table_name='documents')
    op.drop_index('idx_document_expires', table_name='documents')
    op.drop_index('idx_document_entity', table_name='documents')
    op.drop_index('idx_document_current', table_name='documents')
    op.drop_index('idx_document_category', table_name='documents')
    op.drop_index('idx_document_access', table_name='documents')
    op.drop_table('documents')
    op.drop_index(op.f('ix_audit_logs_user_id'), table_name='audit_logs')
    op.drop_index(op.f('ix_audit_logs_timestamp'), table_name='audit_logs')
    op.drop_index(op.f('ix_audit_logs_session_id'), table_name='audit_logs')
    op.drop_index(op.f('ix_audit_logs_request_id'), table_name='audit_logs')
    op.drop_index(op.f('ix_audit_logs_organization_id'), table_name='audit_logs')
    op.drop_index(op.f('ix_audit_logs_id'), table_name='audit_logs')
    op.drop_index(op.f('ix_audit_logs_entity_type'), table_name='audit_logs')
    op.drop_index(op.f('ix_audit_logs_entity_id'), table_name='audit_logs')
    op.drop_index(op.f('ix_audit_logs_action'), table_name='audit_logs')
    op.drop_index('idx_audit_user', table_name='audit_logs')
    op.drop_index('idx_audit_timestamp', table_name='audit_logs')
    op.drop_index('idx_audit_success', table_name='audit_logs')
    op.drop_index('idx_audit_session', table_name='audit_logs')
    op.drop_index('idx_audit_risk', table_name='audit_logs')
    op.drop_index('idx_audit_request', table_name='audit_logs')
    op.drop_index('idx_audit_org', table_name='audit_logs')
    op.drop_index('idx_audit_entity', table_name='audit_logs')
    op.drop_index('idx_audit_action', table_name='audit_logs')
    op.drop_table('audit_logs')
    op.drop_index(op.f('ix_api_keys_user_id'), table_name='api_keys')
    op.drop_index(op.f('ix_api_keys_org_id'), table_name='api_keys')
    op.drop_index(op.f('ix_api_keys_key_prefix'), table_name='api_keys')
    op.drop_index(op.f('ix_api_keys_key_hash'), table_name='api_keys')
    op.drop_index(op.f('ix_api_keys_id'), table_name='api_keys')
    op.drop_index(op.f('ix_api_keys_expires_at'), table_name='api_keys')
    op.drop_index('idx_api_key_user', table_name='api_keys')
    op.drop_index('idx_api_key_prefix', table_name='api_keys')
    op.drop_index('idx_api_key_hash', table_name='api_keys')
    op.drop_index('idx_api_key_expires', table_name='api_keys')
    op.drop_index('idx_api_key_active', table_name='api_keys')
    op.drop_table('api_keys')
    op.drop_index(op.f('ix_webhooks_org_id'), table_name='webhooks')
    op.drop_index(op.f('ix_webhooks_integration_id'), table_name='webhooks')
    op.drop_index(op.f('ix_webhooks_id'), table_name='webhooks')
    op.drop_index('idx_webhook_last_triggered', table_name='webhooks')
    op.drop_index('idx_webhook_integration', table_name='webhooks')
    op.drop_index('idx_webhook_active', table_name='webhooks')
    op.drop_table('webhooks')
    op.drop_index(op.f('ix_users_username'), table_name='users')
    op.drop_index(op.f('ix_users_organization_id'), table_name='users')
    op.drop_index(op.f('ix_users_org_id'), table_name='users')
    op.drop_index(op.f('ix_users_id'), table_name='users')
    op.drop_index(op.f('ix_users_employee_id'), table_name='users')
    op.drop_index(op.f('ix_users_email'), table_name='users')
    op.drop_index('idx_user_username', table_name='users')
    op.drop_index('idx_user_org', table_name='users')
    op.drop_index('idx_user_last_login', table_name='users')
    op.drop_index('idx_user_employee_id', table_name='users')
    op.drop_index('idx_user_email', table_name='users')
    op.drop_index('idx_user_active', table_name='users')
    op.drop_table('users')
    op.drop_index('idx_role_perm_role', table_name='role_permissions')
    op.drop_index('idx_role_perm_permission', table_name='role_permissions')
    op.drop_table('role_permissions')
    op.drop_index(op.f('ix_inventory_items_warehouse_id'), table_name='inventory_items')
    op.drop_index(op.f('ix_inventory_items_part_id'), table_name='inventory_items')
    op.drop_index(op.f('ix_inventory_items_org_id'), table_name='inventory_items')
    op.drop_index(op.f('ix_inventory_items_location_code'), table_name='inventory_items')
    op.drop_index(op.f('ix_inventory_items_id'), table_name='inventory_items')
    op.drop_index('idx_inventory_warehouse', table_name='inventory_items')
    op.drop_index('idx_inventory_status', table_name='inventory_items')
    op.drop_index('idx_inventory_reorder', table_name='inventory_items')
    op.drop_index('idx_inventory_part', table_name='inventory_items')
    op.drop_index('idx_inventory_location', table_name='inventory_items')
    op.drop_index('idx_inventory_cycle_count', table_name='inventory_items')
    op.drop_table('inventory_items')
    op.drop_index(op.f('ix_clients_organization_id'), table_name='clients')
    op.drop_index(op.f('ix_clients_org_id'), table_name='clients')
    op.drop_index(op.f('ix_clients_name'), table_name='clients')
    op.drop_index(op.f('ix_clients_id'), table_name='clients')
    op.drop_index('idx_client_type', table_name='clients')
    op.drop_index('idx_client_org', table_name='clients')
    op.drop_index('idx_client_name', table_name='clients')
    op.drop_index('idx_client_contract', table_name='clients')
    op.drop_index('idx_client_active', table_name='clients')
    op.drop_table('clients')
    op.drop_index(op.f('ix_checklist_items_template_id'), table_name='checklist_items')
    op.drop_index(op.f('ix_checklist_items_org_id'), table_name='checklist_items')
    op.drop_index(op.f('ix_checklist_items_id'), table_name='checklist_items')
    op.drop_index('idx_checklist_item_type', table_name='checklist_items')
    op.drop_index('idx_checklist_item_template', table_name='checklist_items')
    op.drop_index('idx_checklist_item_severity', table_name='checklist_items')
    op.drop_index('idx_checklist_item_safety', table_name='checklist_items')
    op.drop_index('idx_checklist_item_required', table_name='checklist_items')
    op.drop_index('idx_checklist_item_order', table_name='checklist_items')
    op.drop_index('idx_checklist_item_category', table_name='checklist_items')
    op.drop_table('checklist_items')
    op.drop_index(op.f('ix_warehouses_warehouse_type'), table_name='warehouses')
    op.drop_index(op.f('ix_warehouses_org_id'), table_name='warehouses')
    op.drop_index(op.f('ix_warehouses_name'), table_name='warehouses')
    op.drop_index(op.f('ix_warehouses_id'), table_name='warehouses')
    op.drop_index(op.f('ix_warehouses_code'), table_name='warehouses')
    op.drop_index('idx_warehouse_type', table_name='warehouses')
    op.drop_index('idx_warehouse_name', table_name='warehouses')
    op.drop_index('idx_warehouse_location', table_name='warehouses')
    op.drop_index('idx_warehouse_code', table_name='warehouses')
    op.drop_index('idx_warehouse_active', table_name='warehouses')
    op.drop_table('warehouses')
    op.drop_index(op.f('ix_roles_name'), table_name='roles')
    op.drop_index(op.f('ix_roles_id'), table_name='roles')
    op.drop_index('idx_role_system', table_name='roles')
    op.drop_index('idx_role_name', table_name='roles')
    op.drop_index('idx_role_assignable', table_name='roles')
    op.drop_table('roles')
    op.drop_index(op.f('ix_permissions_resource'), table_name='permissions')
    op.drop_index(op.f('ix_permissions_name'), table_name='permissions')
    op.drop_index(op.f('ix_permissions_id'), table_name='permissions')
    op.drop_index(op.f('ix_permissions_codename'), table_name='permissions')
    op.drop_index(op.f('ix_permissions_action'), table_name='permissions')
    op.drop_index('idx_permission_resource_action', table_name='permissions')
    op.drop_index('idx_permission_resource', table_name='permissions')
    op.drop_index('idx_permission_name', table_name='permissions')
    op.drop_index('idx_permission_codename', table_name='permissions')
    op.drop_index('idx_permission_action', table_name='permissions')
    op.drop_table('permissions')
    op.drop_index(op.f('ix_parts_part_number'), table_name='parts')
    op.drop_index(op.f('ix_parts_org_id'), table_name='parts')
    op.drop_index(op.f('ix_parts_name'), table_name='parts')
    op.drop_index(op.f('ix_parts_manufacturer_part_number'), table_name='parts')
    op.drop_index(op.f('ix_parts_manufacturer'), table_name='parts')
    op.drop_index(op.f('ix_parts_id'), table_name='parts')
    op.drop_index(op.f('ix_parts_category'), table_name='parts')
    op.drop_index('idx_part_number', table_name='parts')
    op.drop_index('idx_part_name', table_name='parts')
    op.drop_index('idx_part_mfg_part_number', table_name='parts')
    op.drop_index('idx_part_manufacturer', table_name='parts')
    op.drop_index('idx_part_lifecycle', table_name='parts')
    op.drop_index('idx_part_category', table_name='parts')
    op.drop_index('idx_part_active', table_name='parts')
    op.drop_table('parts')
    op.drop_index(op.f('ix_organizations_name'), table_name='organizations')
    op.drop_index(op.f('ix_organizations_id'), table_name='organizations')
    op.drop_index('idx_org_tax_number', table_name='organizations')
    op.drop_index('idx_org_name', table_name='organizations')
    op.drop_index('idx_org_active', table_name='organizations')
    op.drop_table('organizations')
    op.drop_index(op.f('ix_maintenance_plans_plan_type'), table_name='maintenance_plans')
    op.drop_index(op.f('ix_maintenance_plans_org_id'), table_name='maintenance_plans')
    op.drop_index(op.f('ix_maintenance_plans_name'), table_name='maintenance_plans')
    op.drop_index(op.f('ix_maintenance_plans_id'), table_name='maintenance_plans')
    op.drop_index('idx_maintenance_plan_type', table_name='maintenance_plans')
    op.drop_index('idx_maintenance_plan_regulatory', table_name='maintenance_plans')
    op.drop_index('idx_maintenance_plan_priority', table_name='maintenance_plans')
    op.drop_index('idx_maintenance_plan_name', table_name='maintenance_plans')
    op.drop_index('idx_maintenance_plan_frequency', table_name='maintenance_plans')
    op.drop_index('idx_maintenance_plan_active', table_name='maintenance_plans')
    op.drop_table('maintenance_plans')
    op.drop_index(op.f('ix_integrations_provider'), table_name='integrations')
    op.drop_index(op.f('ix_integrations_org_id'), table_name='integrations')
    op.drop_index(op.f('ix_integrations_name'), table_name='integrations')
    op.drop_index(op.f('ix_integrations_integration_type'), table_name='integrations')
    op.drop_index(op.f('ix_integrations_id'), table_name='integrations')
    op.drop_index('idx_integration_type', table_name='integrations')
    op.drop_index('idx_integration_provider', table_name='integrations')
    op.drop_index('idx_integration_name', table_name='integrations')
    op.drop_index('idx_integration_health', table_name='integrations')
    op.drop_index('idx_integration_active', table_name='integrations')
    op.drop_table('integrations')
    op.drop_index(op.f('ix_checklist_templates_org_id'), table_name='checklist_templates')
    op.drop_index(op.f('ix_checklist_templates_name'), table_name='checklist_templates')
    op.drop_index(op.f('ix_checklist_templates_id'), table_name='checklist_templates')
    op.drop_index(op.f('ix_checklist_templates_category'), table_name='checklist_templates')
    op.drop_index('idx_checklist_template_type', table_name='checklist_templates')
    op.drop_index('idx_checklist_template_name', table_name='checklist_templates')
    op.drop_index('idx_checklist_template_mandatory', table_name='checklist_templates')
    op.drop_index('idx_checklist_template_category', table_name='checklist_templates')
    op.drop_index('idx_checklist_template_active', table_name='checklist_templates')
    op.drop_table('checklist_templates')
    # ### end Alembic commands ###
